<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>A danceable notification cube &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    


        <meta name="description" content="A motion sensing colorful cube that keeps track on Twitter, all for creating awareness about IoT through art.">
        <link rel="canonical" href="http://hackaday.io/project/6593-a-danceable-notification-cube" />



    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
        <script type="text/javascript">
        function getCommentIdFromUrl() {
            if(window.location.hash) {
                var hash = window.location.hash.substring(1);
                var commentId = parseInt(hash.replace('j-discussion-', ''));
                if (commentId) {
                    return commentId;
                }
            }
            return null;
        }

        var commentId = getCommentIdFromUrl();
        if (commentId) {
            var url = window.location.href;
            if (url.indexOf('?') > -1) {
                url = url.substring(0, url.indexOf('?'));
            }
            if (url.indexOf('#') > -1) {
                url = url.substring(0, url.indexOf('#'));
            }
            url += '/discussion-' + commentId;
            window.location.href = url;
        }
    </script>
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@hackadayio">
    <meta name="twitter:title" content="A danceable notification cube">
    
        <meta name="twitter:description" content="This project is an interdisciplinary art and engineering project, where dance will meet technology, directly with its interaction with the cube and indirect with the input from the audience.

There are two objectives for this project:

&#34;Danceable&#34;, it has a MPU6050 accelerometer/gyro sensor with which it should determine:
Color, hue depending on angle (done)
Intensity
Trigged special effects

Give notifications, make it a real time notifier of hash tags on Twitter with the help of a ESP8266 wifi module.">
    
    
        <meta name="twitter:image" content="https://cdn.hackaday.io/images/resize/600x600/1437721435861786380.JPG">
    

    <!-- Open Graph data -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="A danceable notification cube">
    <meta property="og:url" content="http://hackaday.io/project/6593-a-danceable-notification-cube">
    
        <meta property="og:description" content="This project is an interdisciplinary art and engineering project, where dance will meet technology, directly with its interaction with the cube and indirect with the input from the audience.

There are two objectives for this project:

&#34;Danceable&#34;, it has a MPU6050 accelerometer/gyro sensor with which it should determine:
Color, hue depending on angle (done)
Intensity
Trigged special effects

Give notifications, make it a real time notifier of hash tags on Twitter with the help of a ESP8266 wifi module.">
    
    
        <meta property="og:image" content="https://cdn.hackaday.io/images/resize/600x600/1437721435861786380.JPG">
    

    <script>
        var HIO = {};
    </script>

</head>
<body class="project-detail ">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F6593-a-danceable-notification-cube">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    

    
        <div class="page-basic-info-static guest-message-signup">
            
                <h2>Does this project spark your interest?</h2>
                <p class="page-basic-info-text">Become a member to follow this project and don't miss any updates</p>

            

            <div class="signup-holder">
                <form method="POST" action="/signup">
                    <input type="hidden" name="_csrf" value="gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o" />
                    <input type="text" class="input-field input-email" placeholder="Your email address"  name="email"  /><input type="password" class="input-field input-password" placeholder="Password"  name="password" /><button class="black-gold-button signup" type="submit">Become a member</button>
                    <input class="input-field" placeholder="Invitation Code" required name="invitation_code" value="5Ad0ix2-b96J" type="hidden" />
                </form>
            </div>

        </div>
    


    

    <div class="header-photo" >
        <div class="overlay"></div>
    </div>

    <div class="headline">
        <div class="container">
            

            <h2><a href="/project/6593-a-danceable-notification-cube">A danceable notification cube</a></h2>
            <p class="description">A motion sensing colorful cube that keeps track on Twitter, all for creating awareness about IoT through art.</p>

            

            
                <div class="author">
                    <a href="/hacker/70780">
                        <img src="//gravatar.com/avatar/d4c4f04d0df588d1685df12fa6fd0987?d=https://hackaday.io/img/default-avatar.png&amp;r=x&amp;s=100" />
                        
                            <div class="author-details">
                                <div class="author-name">Jakob Andrén</div>
                            </div>
                        
                    </a>
                </div>
            
        </div>
    </div>

    <div class="container">
        <div class="content-left">

            
                <ul class="submissions-icons">
                    
                        
                            <li>
                                <a href="/submissions/prize2015/list" class="submission-icon submission-icon-5">
                                    The 2015 Hackaday Prize
                                </a>
                            </li>
                        
                        
                            <script>
                                HIO.forPrize = true;
                            </script>
                        
                    
                </ul>
            

            
                <a href="/project/6593/gallery#25b2ddf5b90666554b2e94c638663761" id="project-image" class="image-holder" style="background-image: url(https://cdn.hackaday.io/images/resize/600x600/1437721435861786380.JPG)" data-image="https://cdn.hackaday.io/images/resize/600x600/1437721435861786380.JPG">
                </a>
            

            <div class="thumbs-holder">
                
                        <a href="/project/6593/gallery#25b2ddf5b90666554b2e94c638663761" class="image-holder thumb" style="background-image: url(https://cdn.hackaday.io/images/resize/600x600/1437721435861786380.JPG)" data-image="https://cdn.hackaday.io/images/resize/600x600/1437721435861786380.JPG">
                    </a>
                
                        <a href="/project/6593/gallery#3e45eae2866371e6d13ec6ed16f5d158" class="image-holder thumb" style="background-image: url(https://cdn.hackaday.io/images/resize/600x600/5262131435861801132.JPG)" data-image="https://cdn.hackaday.io/images/resize/600x600/5262131435861801132.JPG">
                    </a>
                
            </div>

            
                <div class="view-gallery-holder">
                    <a href="/project/6593/gallery">
                        <div class="view-gallery grey-gold-button very-small-button">View Gallery</div>
                    </a>
                </div>
            

            

            

            

            

                <div class="project-following-container ">
                    <a href="javascript:void(0)" data-href="/project/6593/event/unfollow" class="gold-gold-button unfollow text-changing-button" data-before="<span class='icon-checkmark-gray'>Following</span>" data-after="Unfollow?"><span class="icon-checkmark-gray">Following</span></a>
                    <a href="javascript:void(0)" data-href="/project/6593/event/follow" class="gold-gold-button follow">Follow project</a>
                </div>
                
                

                <div id="similars">
                    <div class="similars-header">
                        Similar projects worth following
                        <a href="javascript:void(0)" class="submissions-close"></a>
                    </div>
                </div>

                
                    <div class="project-skulling-container ">
                        <a href="javascript:void(0)" data-href="/project/6593/event/unskull" class="gold-gold-button unskulled text-changing-button" data-before="<span class='icon-skull'>You</span>" data-after="Unskull?"><span class="icon-skull">You</span></a>
                        <a href="javascript:void(0)" data-href="/project/6593/event/skull" class="gold-gold-button skulled"><span class="icon-skull">Give a</span></a>
                    </div>
                

            

            
            

            <div class="section section-project-stats">
                
                    <span class="icon-view-count" title="View Count">311</span>
                
                <a>
                    <span class="icon-comment-with-hover oi-font-color-grey" title="Comments" id="comment_count">0</span>
                </a>
                
                    <a href="/hackers/all/project/6593/following">
                
                    <span class="icon-view oi-font-color-grey" title="Followers" id="follower_count">4</span>
                
                    </a>
                

                
                    
                            <span class="icon-skull oi-font-color-grey" title="Skulls" id="like_count">0</span>
                    
                
            </div>

            
                <div class="section section-team">
                    <h5>
                        
                            Team
                        
                    </h5>

                    <ul>
                        
                            
                                <li>
                                    <img src="//gravatar.com/avatar/d4c4f04d0df588d1685df12fa6fd0987?d=https://hackaday.io/img/default-avatar.png&amp;r=x&amp;s=100" class="team-photo"/>
                                    <a class="team-link" href="/hacker/70780-jakob-andrn">Jakob Andrén</a>

                                    

                                    
                                </li>
                            
                        
                    </ul>

                    <div class="error-message hide" id="team-error"><p></p></div>

                    
                    <input type="hidden" name="HADPrizeSubmission" value="true"/>
                        
                            <a href="javascript:void(0)"
                               
                                    class="login-button"
                               
                            >Request to join this project</a>
                        
                    

                </div>
            

            

            


            
                
                    <div class="section section-tags">
                        
                            <div class="special-tags">
                                <a href="/projects/tag/hardware" class="tag tag-hardware">hardware</a>
                            </div>
                        
                            <div class="special-tags">
                                <a href="/projects/tag/ongoing%20project" class="tag tag-ongoing">ongoing project</a>
                            </div>
                        
                        
                            <a href="/projects/tag/neopixels" class="tag">neopixels</a>
                        
                            <a href="/projects/tag/Twitter" class="tag">Twitter</a>
                        
                            <a href="/projects/tag/dance" class="tag">dance</a>
                        
                            <a href="/projects/tag/ESP8266" class="tag">ESP8266</a>
                        
                            <a href="/projects/tag/2015HackadayPrize" class="tag">2015HackadayPrize</a>
                        
                            <a href="/projects/tag/accelerometer" class="tag">accelerometer</a>
                        
                    </div>
                
            

            <div class="section section-share">
                <h5>
                    
                        Enjoy this project?
                    
                </h5>
                
                <a href="https://twitter.com/intent/tweet?url=http://hackaday.io/project/6593-a-danceable-notification-cube&text=A%20danceable%20notification%20cube by jakob-andrn&related=hackadayio&via=hackadayio" target="_blank" class="icon-twitter icon-twitter-notext gray-link">Share on twitter</a> &nbsp; <a href="https://www.facebook.com/sharer/sharer.php?u=http://hackaday.io/project/6593-a-danceable-notification-cube" target="_blank" class="icon-facebook icon-facebook-notext gray-link">Share on Facebook</a> &nbsp; <a href="https://plus.google.com/share?url=http://hackaday.io/project/6593-a-danceable-notification-cube&h1=en-US" target="_blank" class="icon-google icon-google-notext gray-link">Share on Google+</a>
            </div>

            
            
                <div class="section section-lists">
                    <h5>This project is in this list</h5>
                    
                        <div class="section-lists list-items">
    <a href="/list/6687-your-human-interface">
        <div title="Your Human Interface" class="list-item-cover"
                
                    style="background-image: url('https://cdn.hackaday.io/images/resize/600x600/1467151436383019562.jpg')"
                
                >
        </div>

        <div class="project-item-title">
            <h4>Your Human Interface</h4>
        </div>
    </a>
</div>

                    
                    <a href="/lists/">Browse all lists »</a>
                </div>
            

            
                <div class="section section-submissions-lists">
                    <h5>This project is submitted for</h5>
                    <ul>
                        
                            <li><a href="/submissions/prize2015/list">The 2015 Hackaday Prize</a></li>
                        
                    </ul>
                </div>
            

            <div class="section section-project-time">
                <p class="project-time">
                    This project was
                        
                            created on 07/02/2015
                            
                                 and last updated a month ago.
                            
                        
                </p>
            </div>

            

        </div>

        <div class="content-right">

            
                <div class="section section-description">
                    <h5>Description</h5>
                    <div class="description">This project is an interdisciplinary art and engineering project, where dance will meet technology, directly with its interaction with the cube and indirect with the input from the audience.<br /><br />There are two objectives for this project:<br /><br />"Danceable", it has a MPU6050 accelerometer/gyro sensor with which it should determine:<br />Color, hue depending on angle (done)<br />Intensity<br />Trigged special effects<br /><br />Give notifications, make it a real time notifier of hash tags on Twitter with the help of a ESP8266 wifi module.</div>
                </div>
            

            

            
                
                    <div class="section section-components">
                        <h5>
                            
                                Components
                            
                        </h5>
                        
                            <ul class="section-component-list">
                                
                                    
    <li class="component-54232">
        <span class="component-number">150</span>
        <span class="component-x">×</span>
        <span class="component-content">
            WS2812B (NEOPIXELS)
            <span class="component-description">Well this needs to be bright.</span>
       </span>
    </li>

    <li class="component-54233">
        <span class="component-number">12</span>
        <span class="component-x">×</span>
        <span class="component-content">
            3W Power LEDS
            <span class="component-description">Cheap from Ebay, well bright is a key here...</span>
       </span>
    </li>

    <li class="component-54234">
        <span class="component-number">1</span>
        <span class="component-x">×</span>
        <span class="component-content">
            MPU6050
            <span class="component-description">Accelerometer and gyro (and temperature if I like to monitor that)</span>
       </span>
    </li>

    <li class="component-54235">
        <span class="component-number">1</span>
        <span class="component-x">×</span>
        <span class="component-content">
            ESP8266
            <span class="component-description"></span>
       </span>
    </li>

    <li class="component-54236">
        <span class="component-number">1</span>
        <span class="component-x">×</span>
        <span class="component-content">
            3 cell 1300 mAh LiPo
            <span class="component-description"></span>
       </span>
    </li>

    <li class="component-54237">
        <span class="component-number">1</span>
        <span class="component-x">×</span>
        <span class="component-content">
            Teensy 3.1
            <span class="component-description"></span>
       </span>
    </li>

    <li class="component-54238">
        <span class="component-number">1</span>
        <span class="component-x">×</span>
        <span class="component-content">
            LM2574 -ADJ
            <span class="component-description">Switch regulator max 0.5A @ 3.3V for micros</span>
       </span>
    </li>

    <li class="component-54239">
        <span class="component-number">1</span>
        <span class="component-x">×</span>
        <span class="component-content">
            NE12S10A
            <span class="component-description">Switch regulator max 10A (!) @ 4.5V for driving Neopixels</span>
       </span>
    </li>

                                
                            </ul>
                        <p>
                            
                            
                        </p>
                    </div>
                
            

            
                <div class="section section-buildlogs">

                    <h5>Project logs</h5>
                    
                    <ul class="buillogs-list post-content details-content">
                    
                        <li>
                            <h2><a href="/project/6593/log/21282-driving-a-80w-led-lamp">Driving a 80W LED lamp...</a></h2>
                            <small class="authorship">a month ago  &bull;
                            <a class="gray-link" href="/project/6593/log/21282#discussion-list">
                                0 comments
                            </a>
                            </small>
                            <p><p>So this is what the internal &quot;bulb&quot; looks like:</p><p><img src="https://cdn.hackaday.io/images/311971437507247103.JPG"></p><p>It has 148 Neopixels and 12 3W power LEDS, which consumes about 40W each when set on full power! Luckily it will newer be on on full for more than a second or two in a row so I only have to manage those effects as peaks.</p><p>The power LEDs are driven by two FET transistors (at ground) directly on the battery 12V voltage, configured in series of three with two in parallel on each FET and then controlled by a PWM signal from the Teensy. <br></p><p><img src="https://cdn.hackaday.io/images/7501451437507540390.JPG"></p><p>The 148 Neopixels proved a lot more tricky, first they will have a calculated peak current of 9A at 5V and they do not like the 12V from the battery. So I had to find a regulator which could buck the voltage down and sustain that current! Well I found one impressive regulator NE12S10A which delivers up to 10A of current at 0.59 -5.1V @ 94% efficiency, perfect! Or... Turns out it is    very inefficient at small loads, it draws 80 mA at IDLE and gets very hot also. And I want the cube to turn off the lights when standing still, and it should be able to do that for a long time.<br><br>Solution? LM2574, an easy to build regulator for currents up to 0.5 A. I &quot;programmed&quot; (resistor bridge) it to deliver the 3.3V needed for the Teensy, ESP and MPU instead of using a linear regulator from the 5V source. And then connected the enable pin from the NE12S10A to the Teensy so that I dynamically may turn it on and of when needed. It powers up to 90% of full power in 3ms which is more than enough for me.<br><br>All solved? Nope, the NeoPixels didn&apos;t turn on... Well missed the part about signal strength for the first Din. Oh well, it needs 70% of Vin which equals to 3.5 V, close but not enough. the recommended solution out there on forums seems to be logic level shifters, but I didn&apos;t have one on hand and wanted it to work. It struck me that I could lower the Vin as well, 3.3V is 70% of 4.7 V, so I tried that and it worked like a charm! Actually I changed the voltage dynamically with a potentiometer and could see that there was no real difference in the light, so I settled on 4.5 V as Vin, same power and stable signal!<br><br>Summary:<br>3.3V max 0.5A, micros<br>4.5V max 10A Neopixels, only on when needed<br></p><p>This is what it looks like mounted inside the bulb, pretty stuffed.<br></p><p><img src="https://cdn.hackaday.io/images/1234741437510140376.JPG"></p>
                                
                            </p>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6593/log/21194-espduino-or-neopixels-memory-leak">ESPduino or Neopixels memory leak?</a></h2>
                            <small class="authorship">a month ago  &bull;
                            <a class="gray-link" href="/project/6593/log/21194#discussion-list">
                                1 comment
                            </a>
                            </small>
                            <p><p>So after several days trying diffrenet approaches for communication beetween server and ESP8266 we finally got the last bit working on the project (have some back logging to do here at hackaday.io), MQTT over a ESP8266 to a Teensy 3.1. The resulting speed is quite remarkable:<br></p><p class="fb-post fb_iframe_widget"><iframe class="" src="https://www.facebook.com/v2.3/plugins/post.php?app_id=&amp;channel=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter%2FxRlIuTsSMoE.js%3Fversion%3D41%23cb%3Df8f133e37c2422%26domain%3Dhackaday.io%26origin%3Dhttps%253A%252F%252Fhackaday.io%252Ff2564f64a7bd7b6%26relation%3Dparent.parent&amp;container_width=571&amp;href=https%3A%2F%2Fwww.facebook.com%2F996578583708210%2Fvideos%2F999688336730568%2F&amp;locale=sv_SE&amp;sdk=joey&amp;width=500" style="border: medium none; visibility: visible; width: 500px; height: 465px;" title="fb:post Facebook Social Plugin" allowfullscreen="true" frameborder="0" height="1000px" width="500px"></iframe></p><p><em>Small edit: is anyone able to see the video?</em></p> <p>But it didn&apos;t work when I tried to combine it with my earlier MPU6050 and Neopixel code... Im now down to a mix of only ESPduino example code for a MQTT client (<a href="https://github.com/tuanpmt/espduino">https://github.com/tuanpmt/espduino</a>) and the Neopixel library from Adafruit. And from what I can see I have a memory problem and I had liked to get your input on that. So some examples: <br></p><p>First serial output from a fully functional run, only about 20 pixels here, last is the data received which changes the output colour:<br></p><pre class="hljs">&#xFFFD;<span class="hljs-constant">KN</span>&#x4D2;&#xFFFD;&#xFFFD;&#x6D2;&#xFFFD;mode <span class="hljs-symbol">:</span> sta(<span class="hljs-number">18</span><span class="hljs-symbol">:fe</span><span class="hljs-symbol">:</span><span class="hljs-number">34</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:eb</span>)add <span class="hljs-keyword">if</span><span class="hljs-number">0</span>&#xFFFD;=&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;)&#xFFFD;&#xFFFD;b&#xFFFD;<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> setup mqtt client<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> setup mqtt lwt<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> setup wifi<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> system startedscandoneadd <span class="hljs-number">0</span>aid <span class="hljs-number">5</span>pm open phy2,<span class="hljs-symbol">type:</span><span class="hljs-number">2</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>cnt connected with <span class="hljs-comment">#SSID#, channel 7</span>dhcp client start...<span class="hljs-symbol">ip:</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.103</span>,<span class="hljs-symbol">mask:</span><span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span>,<span class="hljs-symbol">gw:</span><span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span><span class="hljs-constant">WIFI</span> <span class="hljs-constant">CONNECTED</span><span class="hljs-constant">Connected</span><span class="hljs-constant">Received</span><span class="hljs-symbol">:</span> topic=cubedata=<span class="hljs-number">0102</span>802800015001502<span class="hljs-number">0</span></pre><p>And a faulty run that isn&apos;t able to connect to the MQTT server, get this or just nothing after &quot;Arduino: system started&quot; when rising the number of pixels. I guess that the ESP get the same gibberish and thats whats messes it up:<br></p><pre class="hljs ruby">&#x4D2;&#xFFFD;&#xFFFD;&#x6D2;&#xFFFD;mode <span class="hljs-symbol">:</span> sta(<span class="hljs-number">18</span><span class="hljs-symbol">:fe</span><span class="hljs-symbol">:</span><span class="hljs-number">34</span><span class="hljs-symbol">:a0</span><span class="hljs-symbol">:f1</span><span class="hljs-symbol">:eb</span>)add <span class="hljs-keyword">if</span><span class="hljs-number">0</span>&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;=&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;b&#xFFFD;<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> setup mqtt client<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> setup mqtt lwt<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> setup wifi<span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> system startedscandoneadd <span class="hljs-number">0</span>aid <span class="hljs-number">5</span> open ph,<span class="hljs-symbol">type:</span><span class="hljs-number">2</span> cnt connectewith <span class="hljs-constant"></span><span class="hljs-constant">[Incorrect SSID]channel</span> dhcp clnt start.<span class="hljs-symbol">ip:</span><span class="hljs-number">192.168</span>.<span class="hljs-number">103</span>,<span class="hljs-symbol">mask:</span><span class="hljs-number">5.255</span>.<span class="hljs-number">250</span>,<span class="hljs-symbol">gw:</span><span class="hljs-number">1928.1</span>.<span class="hljs-number">1</span><span class="hljs-constant">ARDUINO</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Invalid</span> <span class="hljs-constant">CRC</span></pre><p>So first thing that is visible is the missing characters in the serial communication, which what I could find is a sign of out of memory. But I run a Teensy 3.1 and both codes are supposed to work on Arduino Uno, I have done tests with the Neopixel library successfully on Uno, so it suprices me that it stops working after adding just about 80 pixels more. About 240 bytes of the 64 kbytes that the Teensy 3.1 has. The Teensy LC, which has 8 kbytes of RAM, also works if I reduce the number of LEDs down to 5.<br><br>Does anyone have any ideas about a more exakt reason or solution to this?<br><br>EDIT: It works together with FastLED, hmm. But FastLED is approx 5 times slower than the Adafruit library so I had prefered to have Adafruit up and running.<br><br></p><pre class="hljs"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> &lt;Adafruit_NeoPixel.h&gt;</span><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> &lt;espduino.h&gt;</span><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> &lt;mqtt.h&gt;</span><span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> NEO_PIN           6</span><span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> NEO_NUM           20</span><span class="hljs-function">ESP <span class="hljs-title">esp</span><span class="hljs-params">(&amp;Serial2, &amp;Serial, 15)</span></span>;  <span class="hljs-comment">// CHpd port</span><span class="hljs-function">MQTT <span class="hljs-title">mqtt</span><span class="hljs-params">(&amp;esp)</span></span>;boolean wifiConnected = <span class="hljs-keyword">false</span>;Adafruit_NeoPixel strip = Adafruit_NeoPixel(NEO_NUM, NEO_PIN, NEO_GRB + NEO_KHZ800);<span class="hljs-keyword">uint32_t</span> c = strip.Color(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>); <span class="hljs-comment">// Start with black</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{  strip.begin();  strip.show();    pinMode(<span class="hljs-number">16</span>, OUTPUT);    <span class="hljs-comment">// Turn on the Neopixel voltageregulator</span>  digitalWrite(<span class="hljs-number">16</span>, HIGH);    Serial2.begin(<span class="hljs-number">19200</span>);  Serial.begin(<span class="hljs-number">115200</span>);  <span class="hljs-comment">//while(!Serial);</span>  esp.enable();  delay(<span class="hljs-number">500</span>);  esp.reset();  delay(<span class="hljs-number">500</span>);  <span class="hljs-keyword">while</span> (!esp.ready());  Serial.println(F(<span class="hljs-string">&quot;ARDUINO: setup mqtt client&quot;</span>));  <span class="hljs-comment">// Begin MQTT - settings in string</span>, from example  <span class="hljs-keyword">if</span> (!mqtt.begin(<span class="hljs-string">&quot;DVES_duino&quot;</span>, <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;Isb_C4OGD4c3&quot;</span>, <span class="hljs-number">120</span>, <span class="hljs-number">1</span>)) {        Serial.println(F(<span class="hljs-string">&quot;ARDUINO: fail to setup mqtt&quot;</span>));    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>);    }  Serial.println(F(<span class="hljs-string">&quot;ARDUINO: setup mqtt lwt&quot;</span>));  mqtt.lwt(<span class="hljs-string">&quot;/lwt&quot;</span>, <span class="hljs-string">&quot;offline&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">//or mqtt.lwt(&quot;/lwt&quot;, &quot;offline&quot;);</span>  <span class="hljs-comment">/*setup mqtt events */</span>  mqtt.connectedCb.attach(&amp;mqttConnected);  mqtt.disconnectedCb.attach(&amp;mqttDisconnected);  mqtt.publishedCb.attach(&amp;mqttPublished);  mqtt.dataCb.attach(&amp;mqttData);  <span class="hljs-comment">/*setup wifi*/...</span></pre>
                                
                                    <a class="readmore" href="/project/6593/log/21194-espduino-or-neopixels-memory-leak">Read more &raquo;</a>
                                
                            </p>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6593/log/21067-neopixel-speed">NeoPixel speed</a></h2>
                            <small class="authorship">a month ago  &bull;
                            <a class="gray-link" href="/project/6593/log/21067#discussion-list">
                                0 comments
                            </a>
                            </small>
                            <p><p>So I want the absolute highest possible refresh rate on this project because that means I do not have to filter the results as much and therefor are able to let it have a funny pulse flashing behavior with quick moves.</p><p>First a short note on the MPU6050 sensor, it transmitted  the raw acc and gyro values in ~1700 us both on the UNO and Teensy, but I have reduced that time to ~300 us by rising the I2C rate from 100 kHz to 800 kHz with the help of the Teensy specific <strong><a target="_blank" href="https://forum.pjrc.com/threads/21680-New-I2C-library-for-Teensy3">i2c_t3</a></strong> library. It was actually possible to pull up the speed even more but the sensor is only specified for 400 kHz, and I prefer some stability and time savings wasn&apos;t as large after that point.</p><p>So lets talk about the pixels now, with some unprofessionally measured speeds for the show() or equivalent<span class="redactor-invisible-space"> method, like this:</span></p><pre class="hljs cpp">    t = micros();    pixels.show();    Serial.println(micros()-t);</pre><table><tbody><tr><td><strong>Micro</strong></td><td><strong>Library</strong></td><td><strong>Update 150 LEDs</strong></td></tr><tr><td>Arduino UNO (16 MHz)</td><td>Adafruit_NeoPixel</td><td>446 us every 2nd 1472 us</td></tr><tr><td>Arduino UNO (16 MHz)</td><td><a href="https://github.com/bigjosh/SimpleNeoPixelDemo">SimpleNeoPixelDemo</a></td><td>960 us every 10th 1980 us <br></td></tr><tr><td>Teensy LC (48 MHz)</td><td>Adafruit_NeoPixel</td><td>490 us every 2nd 1490 us</td></tr><tr><td>Teensy 3.1 (96 MHz)</td><td>FastLED</td><td>4700 us</td></tr><tr><td>Teensy 3.1 (96 MHz)</td><td>Adafruit_NeoPixel</td><td>856 us every 6/7th 1857 us</td></tr></tbody></table><p>So what really surprised me was the FastLED performance which was a lot worse than the others, despite what I read before trying it out. Do note that this doesn&apos;t include the efficient math routines that FastLED apparently has. In my case that doesn&apos;t matter, all my pixels have the same color and I only do a simple HSL conversion for finding the Hue in the accelerometer values, constant saturation, and gyro values for Luminance.<br><br>Funny thing is that it seams the UNO actually is faster than the Teensys when it comes the raw updating of the LEDs. Count in the sensor readings, color conversion and I hope soon Twitter notifications and the Teensy will be worth it, or should I just have developed it around the ESP8266 with braked out pins? (I will say no on this because, Im now able to reset the ESP and when necessary without affecting the motion based lightning). Websockets and MQTT proved a lot more difficult to get working than I suspected, been trying out several now and all of them have had their quirks so far..<br></p>
                                
                            </p>
                        </li>
                    
                    </ul>
                    <p class="log-btns">
                        
                        
                            <a href="/project/6593/logs" class="grey-gold-button medium-button show">
                            
                                View all 4 project logs
                            
                            </a>
                        
                    </p>
                </div>
            

            
                
            
            
            <div class="section section-discussions last">
        <h5 id="j-discussions-title" class="j-discussions-title">Discussions</h5>

    <form id="j-discussion-add-top" action="/discussions/add" name="add-comment" method="POST" class="skip-global-form j-discussion-add hide">
        <div class="textarea-holder">
            <textarea placeholder="Add your comment" name="comment" class="editable input-comment"></textarea>
        </div>
        <input type="hidden" name="categoryId" value="6593" />
        <input type="hidden" name="category" value="project" />
        <input type="hidden" name="_csrf" value="gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o" />
        <input type="hidden" name="replyTo" value="0" />
        <input type="submit" class="grey-gold-button medium-button" value="Post comment" />
    </form>

    <div id="discussion-list">
        
<p>
    <div class="signup-holder textarea-holder">
        <textarea placeholder="Sign in or become a member to leave your comment" name="comment" class="editable input-comment"></textarea>
    </div>
    <a href="#" class="login-button grey-gold-button medium-button half show">Sign in/up to comment</a>
</p>
<div class="modal-content-holder login-modal" id="login-modal">
    <div class="submissions-close modal-cancel"></div>
    <div class="signup-holder">
        <h2>Become a member</h2>
        <p>In order to follow projects & hackers or give skulls
        <br />you need to create an account.</p>
        <form action="/signup" method="POST">
            <fieldset class="form-left">
                <input type="text" class="input-field" placeholder="Enter your email address" required name="email"  />
                <input type="password" class="input-field" placeholder="Pick a secure password" required name="password"  />
            </fieldset>
            <fieldset class="form-right">
              <button class="gold-gold-button signup" type="submit">Sign up</button>
          </fieldset>
          <input type="hidden" name="_csrf" value="gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o" />
          <input class="input-field" placeholder="Invitation Code" required name="invitation_code" value="5Ad0ix2-b96J" type="hidden" />
        </form>
        <a id="login-modal-signin" href="/signin">Already a member?</a>
    </div>
</div>








<script type="text/javascript">

    var pageIndex = 0;


</script>
    </div>

    

</div>



        </div>

    </div>

    
        <div class="container">
            <div class="section-recommendations">
                <h2>Similar projects</h2>
                
                    

<div class="project-item   ">

    
        <ul class="submissions-icons">
            
                
                    <li>
                        <a href="/submissions/prize2014/list" class="submission-icon submission-icon-1">
                            Official Hackaday Prize Entry
                        </a>
                    </li>
                
            
        </ul>
    

    <a href="/project/1173-air-gesture-ac-dimmerswitch" class="item-link">
        <div title="Air Gesture AC Dimmer/Switch  by Johnny" class="project-item-cover"
                
             style="background-image:url(https://cdn.hackaday.io/images/resize/600x600/5047491438578405740.jpg)"
                
                >

        </div>

        
                <div class="project-item-stats">
                    
                    
                        <span class="icon-view-count" title="View Count">9.5k</span>
                    
                    <span class="icon-comment-with-hover" title="Comments">26</span>
                    <span class="icon-view" title="Followers">155</span>
                    
                        <span class="icon-skull" title="Skulls">50</span>
                    
                </div>
         

        <div class="project-item-title hasBadge">
            A Touchless Gesture Mains AC Dimming Switch
        </div>
    </a>
    <div class="project-item-headline">
        <span class="project-owner hide">Project Owner</span>
        <span class="project-owner hide">Contributor</span>
        <h3><a href="/project/1173-air-gesture-ac-dimmerswitch" title="Air Gesture AC Dimmer/Switch ">Air Gesture AC Dimmer/Switch </a></h3>
        <p>by <a href="/hacker/9101">Johnny</a></p>
    </div>
</div>
                
                    

<div class="project-item m-last-child  ">

    

    <a href="/project/3465-playing-with-esp8266" class="item-link">
        <div title="Playing with ESP8266 by Hari Wiguna" class="project-item-cover"
                
             style="background-image:url(https://cdn.hackaday.io/images/resize/600x600/3579761418177920896.jpg)"
                
                >

        </div>

        
                <div class="project-item-stats">
                    
                    
                        <span class="icon-view-count" title="View Count">16.2k</span>
                    
                    <span class="icon-comment-with-hover" title="Comments">5</span>
                    <span class="icon-view" title="Followers">82</span>
                    
                        <span class="icon-skull" title="Skulls">13</span>
                    
                </div>
         

        <div class="project-item-title ">
            What I&#39;ve learned about the very exciting $3 WiFi module.
        </div>
    </a>
    <div class="project-item-headline">
        <span class="project-owner hide">Project Owner</span>
        <span class="project-owner hide">Contributor</span>
        <h3><a href="/project/3465-playing-with-esp8266" title="Playing with ESP8266">Playing with ESP8266</a></h3>
        <p>by <a href="/hacker/9819">Hari Wiguna</a></p>
    </div>
</div>
                
                    

<div class="project-item  b-last-child ">

    

    <a href="/project/5492-iot-power-strip-using-esp8266" class="item-link">
        <div title="IoT power strip using ESP8266 by Pedro Minatel" class="project-item-cover"
                
             style="background-image:url(https://cdn.hackaday.io/images/resize/600x600/4662061430265182945.JPG)"
                
                >

        </div>

        
                <div class="project-item-stats">
                    
                    
                        <span class="icon-view-count" title="View Count">880</span>
                    
                    <span class="icon-comment-with-hover" title="Comments">4</span>
                    <span class="icon-view" title="Followers">19</span>
                    
                        <span class="icon-skull" title="Skulls">5</span>
                    
                </div>
         

        <div class="project-item-title ">
            IoT power strip controlled by ESP8266 and SSR.
        </div>
    </a>
    <div class="project-item-headline">
        <span class="project-owner hide">Project Owner</span>
        <span class="project-owner hide">Contributor</span>
        <h3><a href="/project/5492-iot-power-strip-using-esp8266" title="IoT power strip using ESP8266">IoT power strip using ESP8266</a></h3>
        <p>by <a href="/hacker/11016">Pedro Minatel</a></p>
    </div>
</div>
                
            </div>

        </div>
    

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_project&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />
    <div class="j-modal-confirmation modal-background"></div>
<div class="j-modal-confirmation modal-content-holder">
    <p class="align-center" id="modal-message"></p>
    <p class="align-center"><a class="medium-button gold-gold-button delete-project-button" id="modal-yes" href="">Yes, delete it</a> <a class="medium-button grey-gold-button cancel-button" id="modal-cancel">Cancel</a> </p>
</div>

    
    
    
    
    
    
    
    
    
    

    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evYhvPcTNHjcVmLti9HxMVov4N%2FG0Vb08G3dKHr8dVQWzXej5t18RehizqZ8wIVJ7qCSmA5v7VaFjCQENYTT0gaQoyhjrODHsQk5JUVvz7t44Dtk%2B11xxmipO4Y%2B9cBwn1IdfK1bYjGht%2Bf1yWZu2SwuQOo6kGY9xwArhHVwpedkUh5kLaSLkPbgFU2aMPMYlr%2FkGi5SGh0159v8zUCbh%2Fx4qqGgiq8xue1QDxwAtojDbMufEMnPeES%2BXUvICUCqPFVF9PsrubQsdtbQAJZsDggl-0.48.6.js"></script>

    <style>
        .mediumInsert-buttons {
            display: none !important;
        }
    </style>

    <div id="submission-popup-back"></div>
    <div id="submission-popup"></div>

    <div id="modal-report-back" class="modal-background"></div>
    <div id="modal-report" class="modal-content-holder container">
        <a href="javascript:void(0);" class="modal-close"></a>
        <form action="/report/project" class="j-modal-form">
            <h2>Report project as inappropriate</h2>

            <p class="intro-text">
                You are about to report the project "<b>A danceable notification cube</b>", please tell us the reason.
            </p>

            <textarea name="comment" class="j-report-comment" placeholder="Why do you report the project as inappropriate"></textarea>

            <input type="hidden" name="_csrf" value="gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o" />
            <input type="hidden" name="projectId" value="6593" />
            <div class="modal-footer">
                <input type="submit" value="Report" class="gold-gold-button"/>
            </div>
            <div class='j-modal-form-message'></div>
        </form>
        <div class='j-modal-message hide'></div>
    </div>



    <div id="modal-contributor-apply-back" class="modal-background"></div>
    <div id="modal-contributor-apply" class="modal-content-holder container">
        <a href="javascript:void(0);" class="modal-close"></a>
        <form id="contributor-apply-form">
            <h2>Send message</h2>

            <textarea name="message" class="j-report-comment">
Hello,

I really like your project and I think I have skills to help you.
            </textarea>
            <p class="application-success">Your application has been submitted.</p>
            <input type="hidden" name="_csrf" value="gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o" />
            <input type="hidden" name="projectId" value="6593" />

            <div class="modal-footer">
                <input type="submit" value="Send" class="gold-gold-button"/>
            </div>
        </form>

    </div>


    <div id="modal-contributor-remove-back" class="modal-background"></div>
    <div id="modal-contributor-remove" class="modal-content-holder container">
        <a href="javascript:void(0);" class="modal-close"></a>
        <form id="contributor-remove-form">
            <h2>Remove Contributor</h2>
            <p>
                Are you sure you want to remove yourself as a contributor for this project?
            </p>
            <p>Project owner will be notified upon removal.</p>
            <input type="hidden" name="_csrf" value="gOxDn9Br-EChuP6L4ax_xzGHrOp_8stHhv8o" />
            <input type="hidden" name="projectId" value="6593" />
            <input type="hidden" name="remove_contributor_id" id="remove_contributor_id"/>

            <div class="modal-footer">
                <input type="submit" value="Remove" class="gold-gold-button"/>
                <input value="Nevermind" class="gold-gold-button"/>
            </div>
        </form>
    </div>


    <script>
        HIO.projectId = 6593;
    </script>

  </body>
</html>
