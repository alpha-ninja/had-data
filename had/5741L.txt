<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; Emergency Backup Power and Wallwarts Eliminator &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F5741%2Flogs">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/5741-emergency-backup-power-and-wallwarts-eliminator">Emergency Backup Power and Wallwarts Eliminator</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">DC Uninterruptible Power Supply I built for cluster of Modem, router, VoIP etc.  It also consolidates the power adaptors.</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/10708-kc-lee" title="Visit Profile">K.C. Lee</a><span>&bull;</span>
                
                3 months ago<span>&bull;</span><a href="/project/5741#discussion-list" title="See Comments">6 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/5741-emergency-backup-power-and-wallwarts-eliminator">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/5741/logs/sort/newest">Newest</option>
                    <option value="/project/5741/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/5741/log/17728-battery-charger-part-1">Battery Charger - Part 1</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5741/log/17728#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17728"><p>This is a simple Lead Acid Battery Charger based on TI's <a href="http://www.ti.com/product/uc2906?keyMatch=UC2906&amp;tisearch=Search-EN-Everything">UC2906</a>.   VCC is 18V from my AC adaptor.  </p><p><img src="https://cdn.hackaday.io/images/1213801431394774020.png"></p><p>I based it on Figure 1 "Dual Level Float Charger" from the <a href="http://www.ti.com/general/docs/lit/getliterature.tsp?genericPartNumber=uc2906&amp;fileType=pdf">datasheet</a>.  There is an Excel spreadsheet that I used to calculate the values on my Github.</p><p> The charge current is set to 500mA by R1//R2.   I also have a NiCd battery and charger with a much faster charge rate to take care of short term outages.  The charge current is limited by what my AC adaptor can spare.   For my 8A*Hr battery, that should take 16 - 20 hours to fully recharge.  This is one area that a microcontroller can provide some flexibility by allocating a higher charge current based on the amount of current available.  The charge algorithm for lead acid is actually very similar to Li-ion batteries.</p><p>Figure 2 in the datasheet shows the equation to arrive at the values while figure shows the charging states.  The charger is temperature compensated for proper charging.</p><p>The circuit was constructed on a single side PCB that was etched with toner transfer.  You want to keep the charger chip near the battery as it sense ambient temperature.  Ideally you want to place the transistor on a heatsink away from the charger chip and run wires.  There isn't much heat generated in float charge stage where the battery spend most of its time, so the heating effects is minimal.</p><p><img src="https://cdn.hackaday.io/images/6409051431399435407.png"></p>3D rendering of the PCB. <p><img src="https://cdn.hackaday.io/images/8881131431399310159.png"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5741/log/17748-battery-charger-part-2">Battery Charger - Part 2</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5741/log/17748#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17748"><p>This is the NiCd Charger I used.  The charging algorithm of Ni type battery is hard as it depends on a small voltage and rate of change.  I used a <a href="http://www.ti.com/product/bq2002?keyMatch=bq2002&amp;tisearch=Search-EN-Everything">BQ2002</a> NiCd/NiMH Charger Controller. </p><p>It is optional as this type of battery are harder to find these day.  X3, C4, D4, D5, and C7 are not part of the charger circuit and they should always be there.  +UB is the the backup supply rail.  Additional battery packs etc should be made with Or&apos;ing diode to +UB.<img src="https://cdn.hackaday.io/images/5310481431445363845.png"></p><p>Most of the design details are covered by the <a href="http://www.ti.com/lit/gpn/bq2002">datasheet</a> and the app notes.</p><p>I have selected C/2 for the charge rate by connecting TM pin to mid rail voltage with  R5 &amp; R6.  </p><p>The CC control signal is level translated by Q3 to the Constant Current ciurcuit.  Q5 provides the negative feedback by sensing the voltage across R16 hence regulating the current.  In this case, the current is about 0.7A which is roughly 1/2 C for th battery pack I have.  Q4 selection is non-critical as almost any P-MOSFET would do.</p><p>Voltage divider R13, R14 is used to attenuate the battery voltage. I have N=10 cells, so I pick R13 to be roughly 9X the value of R14. The BQ2002 voltage is regulated by a 5V Zener diode (D3).  Q6 detects when the battery pack is connected and use it to power cycle the BQ2002. </p><p>I use a bicolour LED for the charge status on the front panel: Red = Charging, Green = Battery Full and  Off = No batteries.</p><p>J1 is the battery connector.  Due to high current involved, a <a href="http://en.wikipedia.org/wiki/Four-terminal_sensing">4-wire</a> connections is used to measure the battery voltage.</p><p><img src="https://cdn.hackaday.io/images/1476911431447042672.png"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5741/log/17766-undervoltage-shutdown">Undervoltage Shutdown</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5741/log/17766#discussion-list">
                                    5 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17766"><p>This is the undervoltage shutdown circuit that protects the batteries from over discharge.  A very large hysteresis has been introduced to the circuit to make sure that the power is re-enabled only after the blackout is over.</p><p><img src="https://cdn.hackaday.io/images/9140221431458269690.png"></p><p>TI <a href="http://www.ti.com/product/TL7702B">TL7702</a> power supper supervisor is used for monitoring the backup power rail.  This is the bipolar high voltage version that works up to 18V (and even available in DIP!) This circuit shows how versatile this building block is.  It has a timer, a temperature compensated internal reference, open drain true and complement outputs, well defined behaviour down to 1V.  To do the same with a dual comparator or a 555 would require a reference source, and more discretes etc, but won't come close. </p><p>On the falling edge, /RESET (open collector) is inactive, so R23, R24 forms the voltage divider and determine the falling threshold.  V(fall) = 2.53V * (R23 + R24)/R24 =  9.3V</p><p>On the rising edge, /RESET is at logic low.  So the lower branch of the divider becomes R24 // R36 = 3.73K<br>V(Rise) = 2.53V * (3.73 + 15) / 3.73 = 12.69V</p><p>With the Schottky Or'ing diode drop of about 0.5V under load, we are looking at about 9.8V when the battery will be disconnected.  The diode has almost no load prior to reconnecting, so the circuit recovers at just below 13V.</p><p>The P-MOSFET is driven from the RESET pin.  When RESET is asserted (i.e. undervoltage), the MOSFET gate is raise close to +UB rail, thus turning its output off.   When RESET is deasserted, R31 + R32 pulls the gate low. R32 and C5 at the gate of the P-MOSFET converts it into an integrating amplifier whose output rises linearly in response to a step change in its input, limiting the in-rush current to downstream capacitor C12.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5741/log/17768-module-breakout">Module Breakout</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5741/log/17768#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17768"><p>This is the boring part of the design.  I used a VME 3 rows DIN receptacle that I removed from old parts for the plug-in power modules.  I removed a portion of the connector as it was too wide for my box.</p><p><img src="https://cdn.hackaday.io/images/9994941431461026937.png"></p><p>B Row is the ground.   The A Row is the output from the power modules. The pins are connected to JP1-3 which is wired to the power cables for my electronics.  The C Row is the power input for the modules.  A section of it runs directly from the AC Adaptor for the non-essential outputs.  The rest are run from the backup power.</p></div>
                            </div>
                        </li>
                    
                </ul>

                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'mdwsppGc-Ph5i5o7x7bO8unl3mM-1_i3Z5Z4';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>