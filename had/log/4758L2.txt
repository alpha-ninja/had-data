<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; SentriFarm &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F4758%2Flogs%3Fpage%3D2">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/4758-sentrifarm">SentriFarm</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">Solving a key farming problem: is it safe to harvest / spray / sow today? (+experiments with &#39;big&#39; data in agriculture) </p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/46379-pastcompute" title="Visit Profile">pastcompute</a><span>&bull;</span>
                
                5 months ago<span>&bull;</span><a href="/project/4758#discussion-list" title="See Comments">13 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/4758-sentrifarm">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/4758/logs/sort/newest">Newest</option>
                    <option value="/project/4758/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/4758/log/15767-ground-sensor-circuit-rough-cut">Ground sensor : circuit rough cut</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/15767#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15767"><p>First draft of ground censor circuit. It can monitor the battery voltage, ambient light. surface and subsurface soil temperature. The sensors are powered off, only enabled by the MOSFET to take readings; this will reduce standby power use and also interference when transmitting wifi. The beacon LED can be used to locate. I happen to have LM324 on hand so using that to buffer the analogue readings, and a 4051 to multiplex because the ESP8266 only has one ADC. The LDR monitors light, so we can transmit readings less often overnight to reduce battery (and logging the daylight will also be interesting) - and maybe helpful for diagnostics and tuning, because the solar panel may be partly obscured by a crop.<br></p><p><img src="https://cdn.hackaday.io/images/6488991427608955882.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/15777-sensor-mechanical-design-doodles">Sensor : mechanical design doodles</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/15777#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15777"><p>We started thinking about the sensor mechanical fabrication today.  It needs to be robust, moisture resistant, corrosion resistant, able to be pushed / twisted by a human into possibly compacted ground, and maybe even driven over.  The shaft at this stage may be up to 20mm aluminium tube, with 3D printed bushes at each end and threading to accept a possibly ABS 3D printed structure housing the electronics and solar panel.  The shaft may even have a auger incorporated</p><p>The image shows also our thoughts about how the DS18B20 sensor end be in ground contact, perhaps via  a fabricated tapered aluminium block and heatsink grease.</p><p><img src="https://cdn.hackaday.io/images/867301427630819080.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/15927-fritzing-around">Fritzing around</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/15927#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15927"><p>I took Fritzing for a test drive for the first time.  After some stuffing around I managed to build it from the git sources on Debian wheezy, I <a href="https://github.com/fritzing/fritzing-app/wiki/1.3-Linux-notes">updated their wiki</a> with instructions for that case.</p><p>I found it very easy building up a circuit on the breadboard.</p><p>However, I found the schematic editor took quite a bit of getting used to, and the auto router just makes completely illogical decisions and added crazy crooked lines all over the place. In the end I just dragged the components around and manually edited the connections, once I worked out that you can just double click to make a bend.  Along with a bunch of other UX annoyances I think there is still some polish but it is a useful tool for a quick circuit whip-up anyway.</p><p>So here is the circuit for my desktop testing rig.</p><p><img src="https://cdn.hackaday.io/images/3874301427892094902.png"></p><p>I can use this to develop and test the telemetry.</p><p>The ESP12 arrived today from tronixlabs and the MSP430-SOLAR from dontronics so over the weekend I'll hook those together and start experimenting with deep sleep mode and solar operation, to characterise power usage performance.<br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/15985-solar-characterisation">Solar characterisation</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/15985#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15985"><p>According to <a href="https://nurdspace.nl/ESP8266#Ultra-low_power_technology" target="_blank">https://nurdspace.nl/ESP8266#Ultra-low_power_technology</a> in deep sleep the ESP8266  needs 33mW and ~ 660mW while transmitting, so if I can use a 95% duty cycle then the average might be 65mW.  Very roughly...</p><p>Again, very very roughly, because I haven't yet sat down and performed all the calculations including charge time at peak sunlight (2.4V @ 80ma), through the protection diode, taking into account the capacitor needs a current limit resistor, etc. plus current for the actual load.<br></p><p>I'll probably do those properly eventually, but in the meantime I am building a datalogger to gain an  empirical understanding of how the MSP430-SOLAR coupled with a 25F supercap deals with a 70mW load such as the ESP8266 might apply. This will give me some concrete results incorporating all the various inefficiencies, etc. - though still an approximation.<em></em></p><p>The data logger will log over 24 hours the solar cell / supercap voltage, plus the regulated 3v3 line, to gain an understanding of how low the supercap can discharge before the stepup / regulator flakes out.</p><p>Then I'll repeat with a real ESP8266 instead of a resistor...<br></p><p><em>(OTTOMH 95% charge is three time constants, or 25F, using a 68ohm current limit, or 85 minutes from empty to charged in full sunlight. Maybe. From the other end, at 75mW I ended up with a quadratic which is probably wrong given the time of night, but if we assume the supercap charged to 1.6V then the equivalent load is 397 ohms. Maybe. For a discharge time constant of 3.22 hours predicted, which is only part way through the night. So we shall see...)</em><br></p><p>Test circuit:</p><p><img src="https://cdn.hackaday.io/images/9917441427981791789.jpg"></p><p><img src="https://cdn.hackaday.io/images/6922251427981813639.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/15986-the-real-world">The real world</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/15986#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15986"><p>I caught up with one of my farming mates at the footy club tonight.</p><p>He definitely thinks this is a good idea. He also gave me some good insights:</p><ul><li> for example, some have weather logging devices on their headers (tractors) . But that only tells you whats going on where you already are...</li><li>some paddocks would need more than one sensor - sometimes they measure the conditions then drive to the other side and things are different</li><li>there is a community network where farmers are on the radio to each other. So perhaps there could be a 'cloud' layer over the top of the sensor network / farm base in the future...</li><li>and of course you can buy remote water logging for troughs, for example, but they use the GSM/3G network - which means more SIM cards to maintain...</li><li>with the fire danger there is the important 'delta T' calculation - more on that later</li></ul></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/16106-dodgy-data-logger">Dodgy data logger</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/16106#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16106"><p>So I managed to build a data logger over the weekend from an Arduino Leostick, a TinyRTC, DS18B20 and MSP430-SOLAR. In the end I didn't need the opamp, after verifying that the solar voltage definitely capped out at about 2.5V. So it monitors four voltages: Solar Panel, SuperCap, input to the stepup regulator (and thus the capacitor current) and the regulated 3v3. Also logs temperature and time.</p><p>As part of this exercise it struck me that I probably had to high a current limit resistor on the supercap as on examination the MSP430 features two diodes that drop up to 0.8V, presumably for limiting charge voltage to a NiMH or NICAD.</p><p>At also occurred to me that many small solar charge systems are simple but inefficient. Due to the diode there would be energy at low light that gets "lost", and further energy is lost through current limiting resistor on discharge.  Ideally there would me some kind of MPPT between the panel and the supercap and the step up regulator (or perhaps all built into one)... so possibly some work to do here in a couple of months after the first system prototype is going.</p><p>Anyway, pictures of my dodgy work :-) Its been a while (read: a few years, apart from the radio miniconf at LCA2015) since I had the soldering iron warm for this long. I probably should have stuck to breadboard I would have been done a few hours earlier. But it tuns out its like riding a bike...</p><p><img src="https://cdn.hackaday.io/images/993441428239515313.jpg"></p><p><img src="https://cdn.hackaday.io/images/8857461428239536914.jpg"><br><em>(Photos (c) @pastcompute CC-BY-NC)</em><br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/16209-brief-update">Brief update</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/16209#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16209"><p>More on this later, but one obvious thing is that with the MSP430 using two diodes to drop around 0.8V off the panel, presumably to allow trickle charging of a normal battery, is that only 1.6V max charges the supercap. With peak charge Q = CV and supercap rated to 2.5V an extra 50% energy could be retained by allowing 2.4V on the supercap instead of 1.6. So the next mod will be to short out the 1N4148 and leave just the shottky diode, if I can confirm the resulting voltage will always be &lt; 2.5.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/16357-logging-shenanigans">Logging shenanigans</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/16357#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16357"><p>Catching up, I ran the logger over two days and nights.</p><p>The first night, the supercap slowly discharged, and maintained (unloaded) regulator voltage.</p><p>The second day was rainy / overcast, then at around 8pm suddenly the current out of the capacitor surged and the regulator voltage collapsed.  This version of the chart doesn't show capacitor charge which is proportional to the voltage but it lost 33% in 1/2 hour as well.  Notably the temperature dropped very sharply, 2C in 30 minutes, but I suspect what actually happened is some moisture shorted out something.  <br></p><p><img src="https://cdn.hackaday.io/images/2809771428664275904.png"></p><p>So apart from using more rubber bands, I had reinforced what was obvious, that the system is underutilising the capacitor by a good third.</p><p>So this evening with about two hours of daylight left after work, I replaced the current limiting resistor with a 39 ohm (was 68) and shorted out the 1N4148 leaving just the shottky diode.</p><p>Preliminary chart results:</p><p><img src="https://cdn.hackaday.io/images/7564421428665347114.png"></p>
<p>As expected, things are somewhat better (even at this early stage)</p><p>By 8:30pm the capacitor retains 50% more charge compared at the same time of day to the first test.</p><p>Obviously, the capacitor recharges at a much faster rate; recovering from 15% to 80% eventual charge in 35 minutes full (late afternoon) sunlight, versus 30% to 80% eventual charge in 1 hour 20 full morning sun in the first configuration.</p><p><em>I seem to have a short somewhere, because it is night time, the solar graph should be 0 at this point... &lt;strikethrough&gt;Note, the sharp drop and recovery is where I had the panel positioned so that it fell under shade of a large tree, and I moved it  back into the sun.</em><em>&lt;/strikethrough&gt;</em><br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/16358-welcome-update">Welcome Update</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/16358#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16358"><p><a data-mention-user-id="61233" href="/hacker/61233">@plains203</a> my neighbouring farmer has joined the project now.</p><p>He showed me a quick google maps survey, there are more than 10 large paddocks, several geographically separated with the longest shot over 10km.</p><p>The benefit of this project will extend way beyond just weather monitoring, because the more any farmer can learn about crop conditions the better, and a continuous remote data logging solution will provide great value in this regard.</p><p>So all we need to do is solve the 10+km shot first !<br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4758/log/16588-another-update">Another update</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/4758/log/16588#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16588"><p>Well I've been busy with other things.  After talking to other people I'm still thinking I'll use the ESP8266 in the sensors, but I am probably going to build a head to head ESP8266 vs. Arudino Micro plus NRF24L01 and see how they go against each other.</p><p> I also manage to process some log data from across last weekend.  As usual it seems obvious with hindsight, buy very obviously having the temperature sender inside the plastic box with the electronics acts as a bit of a glasshouse, and you can see the temperature spiking up to 35C on a day when outside never got past 25C. This seems to be actually interfering with voltage regulation interestingly, the output drifts as high as 3.6V (unloaded, still) once the supercap is fully charged. On the plus side, even once I hook up the ESP8266 it looks like the 22F capactor _should_ hold enough charge to do what I need overnight and still recharge on an overcast day, although the jury is still out.  I'm intending to hook that lot up on the weekend, as I finished a first cut of the sensor software, which itself logs its own VCC and a DS18B20 using an ESP-01.</p><p><img src="https://cdn.hackaday.io/images/9072371429189120385.png"></p><p>I cant remember if I mentioned it, but I am also playing with designs for a solar MPPT charger front end although that may be gold plating if things work OK as is.<br></p></div>
                            </div>
                        </li>
                    
                </ul>

                
                <div class="pagination">
                    
                    <a href="?page=1" class="grey-gold-button prev-button ">Previous</a>
                    
                    
                    <a href="?page=3" class="grey-gold-button next-button ">Next</a>
                    
                </div>
                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'N1jUDVSu-SHrGopjWVw-es_bN9VMVRN31B4s';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>