<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; Bench Power Supply &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F4154%2Flogs%3Fpage%3D4">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/4154-bench-power-supply">Bench Power Supply</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">Designing an open source, modular bench power supply to rule them all.</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/4501-the-big-one" title="Visit Profile">The Big One</a><span>&bull;</span>
                
                7 months ago<span>&bull;</span><a href="/project/4154#discussion-list" title="See Comments">56 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/4154-bench-power-supply">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/4154/logs/sort/newest">Newest</option>
                    <option value="/project/4154/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/4154/log/18462-rear-faceplate-and-magic-smoke">Rear Faceplate and Magic Smoke</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18462#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18462"><p>I finished the rear faceplate, and have the A/C hooked up and verified:</p><p><img src="https://cdn.hackaday.io/images/3326331432570475861.JPG"></p><p><img src="https://cdn.hackaday.io/images/71621432570493853.JPG"></p><p>Unfortunately, when I plugged the controller (microcontroller + DAC + display) in, I let the magic smoke out.</p><p>It appears the problem was due to a faulty 7805 regulator which I had salvaged from who knows where.  The regulator output 10v instead of 5v... which obviously didn't do so well for the AVR.  The display has (luckily) appeared to survive (although I have only done some minimal testing with it, so there is still a chance that it is bad).  I am unsure whether the DACs survived or not; I know that at least one channel on one of them is outputting the correct voltage, but without a working AVR I can't really set the voltage for any of the other ones.</p><p>My plan is to solder up yet another controller board, and this time test my regulators before I use them.  Hopefully I will have time for that in the next few days.</p><p>Cheers</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18497-display-is-not-dead">Display is Not Dead!</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18497#discussion-list">
                                    6 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18497"><p>I was worried that the 10V magic smoke adventure from the weekend had killed my display... a quick test showed that it worked, but I didn't do much more than 5 seconds to see if it showed something.</p><p>Last night, after re-soldering the entire controller board for a third time, (this time verifying the operation of the linear regulators before soldering them on), I was able to verify that the display works.  There are still some problems somewhere; I suspect the issue is the DACs (which, given that they are MSSOP-10, I have been unable to verify without soldering onto the board), but I uploaded a simple display test program (seen below) and you can see that all characters are showing properly with no errors or artifacts.</p><p><img src="https://cdn.hackaday.io/images/5074221432651586504.JPG"></p><p>Tonight I hope to have time to verify (and replace if needed) the DACs, and (finally) get the controller working.</p><p>One more note on the ISP issues: on this go-round, I decided to not populate the pullups / caps / TVS diodes on the encoders (which are shared with ISP pins).  Those are the root cause of the ISP problems, and instead of putting them on the board I can solder them directly to the encoders.  It is a bit more annoying, but perfectly doable, and will allow me to re-flash using the ISP if needed in the future.</p><p>Cheers</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18649-control-board-first-channel-working-video">Control Board + First Channel Working (Video!)</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18649#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18649"><p>Tonight I got the first channel (confusingly mapped to Channel 2, but I have my reasons for this) up and running with the control board.  To my utter surprise, the DACs still appear to work, despite having been subjected to 10V for 5 - 10 seconds (when I let the magic smoke out of the AVR). Yay for Microchip!  :-)  I have not done any accuracy testing on them, so I may still need to replace them if the output voltage is not as accurate as it should be, but for now things look to be pretty good.</p><p>Below is a video, followed by some images of the supply in action.</p><p><iframe width="500" height="281" src="//www.youtube.com/embed/U8eyJXHFIyo" frameborder="0" allowfullscreen=""></iframe></p><p><span></span><br></p><p>Voltage set with no load:</p><p><img src="https://cdn.hackaday.io/images/7501791432865837592.jpg"></p><p>Shorting the outputs to show current limiting:</p><p><img src="https://cdn.hackaday.io/images/5855451432865870451.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18693-another-channel-soldered-working">Another Channel Soldered + Working</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18693#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18693"><p>Another channel is soldered up and working:</p><p><img src="https://cdn.hackaday.io/images/2828331432947978748.jpg"></p><p>Things are starting to get pretty tight inside the enclosure (at least in places):</p><p><img src="https://cdn.hackaday.io/images/8897291432948011348.jpg"></p><p>It looks like I will need to improve the software calibration logic.  Multiple sample points (especially for current) will probably help accuracy.  (The voltage seems to be pretty linear across the entire range, but current is not, and can differ quite a bit from actual readings).</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18708-current-limit-led-now-working">Current Limit LED now working</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18708#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18708"><p>Earlier I had mentioned that the current limit LED indicator was not working properly.  It would work when current limiting was enabled for very low values (less than 100mA or so), but it would not turn on for higher values.</p><p>Today I ran through the entire current limiting control circuit, and figured out what was happening.</p><p>The issue occurs because the current limit control output from the op amp does not go higher than about -0.1V for the majority of current limit setpoints.  (Given that I am using a PNP transistor for current limiting, that makes sense).  The op amp that I was using to turn on the LED was comparing this value to GND; obviously, if the current limit output does not go higher than GND, it will never turn the light on.</p><p>To fix it, I soldered up a voltage divider to get about -3V, and used that as a comparison value rather than GND.  Very simple, except that it was reworking an SMD board.  I had to lift an op amp pin and solder a jumper between it and the voltage divider output.  Luckily there is a decoupling capacitor very close to the op amp which provides me access to -15V and GND in a tidy 0603 package.</p><p>WARNING: The photo of the result is below, and looks hideously ugly.  Do not view this photo if you have a heart condition, are pregnant, easily scared, suffer from (or enjoy having) OCD, or think that a 1/8W axial resistor is small.</p><p><img src="https://cdn.hackaday.io/images/2727141433007238342.jpg"></p><p>For scale, the resistors / caps are 0603 and the IC is TSSOP-14.</p><p>Unfortunately, I didn't find this until the third board, two of which are already in the enclosure.  I guess I need to take them out to do this fix... that will be annoying.  :-(</p><p>For those following along at home, Rev 1.1 boards will include the proper voltage dividers on the board itself (I just need to figure out if anything needs to change for the negative boards... that will be my next mini project).</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18783-third-channel-working">Third Channel Working</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18783#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18783"><p>Yesterday evening I finished the third channel, this time a negative channel.  So now I have channels 1, 2, and 4 completed (1 and 2 are 5A positive channels, 4 is a 1.5A negative channel).  I had channel 3 soldered up previously, but there was a problem with it so I will need to try again.</p><p>The negative channel is working well from a hardware point of view, but the software needs some work.  This is the first time that I had hooked a negative channel up to my controller, and the software does not account for negative vs. positive.</p><p>A (very bad) picture is attached below.</p><p><img src="https://cdn.hackaday.io/images/527391433173270746.JPG"></p><p>Next steps (in no particular order):</p><ul><li>Solder up the last channel</li><li>A whole bunch of programming</li><li>Wooden enclosure (including making some jigs for the wood working, so this may take a while)</li></ul></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18811-update-single-source-power-supply-not-supported">Update - Single Source Power Supply Not Supported </a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18811#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18811"><p>Originally I had said that a goal was to be able to use a 12v wall wart with a single controller board to get a 1.7-10v variable output.  Today I confirmed that this use case is <strong>not</strong> possible.  You require a dual supply for the regulator board to work (although the negative side requires very little current, so you may be able to get by with a charge pump or something to supply the current).  I apologize for the inconvenience; however you can get a couple of cheap switch mode supply for not a lot of money these days so there is really no reason not to go this route.  (For instance, I purchased 2x 15v 7A supplies from Mouser for less than $25 CAD each.  You can buy similar supplies on eBay for under $10, if you are willing to risk the fire hazard.  I have heard that you can link two wall warts to get a balanced supply, but am not sure if this is safe or not, so don't try it without doing your own research.)</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/18813-hardware-completed">Hardware Completed</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/18813#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18813"><p>The hardware is now completed and appears to be working properly.  I still need to finish writing the software and make the wooden case for the whole thing.</p><p>Pictures of the assembled power supply are below.  Enjoy!</p><p><img src="https://cdn.hackaday.io/images/7739801433218621761.JPG"></p><p><img src="https://cdn.hackaday.io/images/728571433218648161.JPG"></p><p><img src="https://cdn.hackaday.io/images/1826331433218670324.JPG"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/19000-one-more-try-for-negative-channel">One More Try for Negative Channel...</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/19000#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-19000"><p>The original negative channel didn't end up working properly after all... I must have had some bare wires somewhere that weren't quite touching, because as I was probing it with my multimeter while trying to get the overcurrent light working properly, something sparked and blew a trace (it was pretty cool actually, I had never personally seen a trace blow before! ;-)).  Yesterday evening I soldered up another one (I have it down to about 45 minutes now!), but there was a short between VB and GND that I couldn't find, which took me another 2 - 3 hours to track down.  (End result: I had put the solder paste on one of the op amps a bit too close to the chip, and there was a bridge between two pins that I couldn't see without taking the chip off the board.)</p><p>Anyway, after a long and frustrating time to troubleshoot, I got it working in the end (95% sure this time).  The voltage light works, the overcurrent light works, voltage + current limits can be set via the GUI (I had fixed that particular software bug a day or two ago, I don't think I remembered to post about it).  More testing is definitely needed, but I think that things are looking good!</p><p>Outstanding issues:</p><ul><li>Build enclosure (and make some tools + jigs required to make the enclosure)</li><li>More software work (the burning need at this point looks to be multi-point calibration for current... the voltage setpoint and readout is pretty much linear across the entire range, as is the current readout, but the current setpoint seems to not be defined by a linear function.  I need to see how best to do this... <a data-mention-user-id="51671" href="/hacker/51671">@Baruch Even</a> had mentioned the Least Squared Estimate in a <a href="https://hackaday.io/project/4154-bench-power-supply/log/15419-voltage-calibration-working-plus-pictures" target="_blank">comment a few months back</a> relating to this; I had looked into it briefly but had not done enough research to fully understand the method.  If anyone has thoughts or comments on alternative approaches, that would be great!</li></ul><p>Cheers</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4154/log/19245-multi-point-calibration-working">Multi Point Calibration Working</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/4154/log/19245#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-19245"><p>Over the weekend I have implemented multi point calibration.  I currently use 8 calibration points, which seems to work just fine.  I use linear interpolation to get calibration values between the calibration points.  Testing shows that things are working quite well.  Current limiting is working, and accurate down to less than 20mA (I can even plug an LED directly into the power supply outputs without it blowing up!)</p><p>I also added the ability to set startup voltage / current limiting on a per-channel basis.  This is configured via the calibration script (run on the computer, talking to the power supply over USB Raw HID).</p><p>I will post a demo video when I get the chance, although that may not be for a few days given my workload right now...</p></div>
                            </div>
                        </li>
                    
                </ul>

                
                <div class="pagination">
                    
                    <a href="?page=3" class="grey-gold-button prev-button ">Previous</a>
                    
                    
                    <a href="?page=5" class="grey-gold-button next-button ">Next</a>
                    
                </div>
                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = '2QS48AMM-eZRVrE7J8MGrQ8g4xAbKrB4aH3w';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>