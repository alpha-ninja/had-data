<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; Motion Controlled Cabinet Light &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F4451%2Flogs%3Fpage%3D1">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/4451-motion-controlled-cabinet-light">Motion Controlled Cabinet Light</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">An LED strip of white LEDs that can be turned on, dimmed, and turned off with a wave of your hand</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/6860-thomas-snow" title="Visit Profile">Thomas Snow</a><span>&bull;</span>
                
                6 months ago<span>&bull;</span><a href="/project/4451#discussion-list" title="See Comments">4 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/4451-motion-controlled-cabinet-light">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/4451/logs/sort/newest">Newest</option>
                    <option value="/project/4451/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/4451/log/14514-prototyped">Prototyped</a></h2>
                            <small class="authorship">6 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/14514#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-14514"><p>I bread-boarded the prototype and I seem to have everything working.  I used an Arduino Mega 2560 programmed as an ISP Programmer to program the ATTiny85.</p><p>The PWM can control the brightness of the LEDs the way I want.  The timer seems to be delivering the interrupts properly so that delay is as accurate as the internal 8 MHz clock will allow.  I've gotten the range sensor to work correctly (tip: put some delay between samples, I suspect the delay should be long enough so all the pulses stop bouncing around the room, triggering false echoes - the bigger the room, the longer the delay).</p><p>My only problem is making a circuit board.  I managed to get the circuit on a Radio Shack PCB blank and etched it ok, after much trial and error, I must say.  The problem came when trying to drill the holes.  I bought some drill bits from Adafruit, but they snapped easily while drilling.  I don't know what I'm doing wrong there.  In the end, I laid out the board in Eagle CAD and am waiting for Dirty PCBs to make and deliver them.  The amount of money wasted on toner transfer paper, etchant, PCB blanks, and drill bits is a lot more than the cost they are doing it for me!</p><p>I'm also waiting for the LED tracks for under the counter.</p><p>Once those are sorted, I'll be installing the lights.  When I get them up, I'll post a Youtube video showing them in action.</p><p>It's a cute little project and I am enjoying it.  I'm also scoring some points with the Honey!</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/14531-ordered-some-more-parts">Ordered Some More Parts</a></h2>
                            <small class="authorship">6 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/14531#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-14531"><p>I decided that once I get this project working well, that I might make several for family and friends that might need something like this.  To that end I placed an order for some HC-SR04 (Ultrasonic Ranging Module) and the HC-SR501 (PIR Sensor) modules from a company in China.  They're dirt cheap compared to what you can get them for in the US.  Adafruit is selling the PIR sensor for $9.95 vs. the 87 cents I paid in China (and you know they are getting them from the same place!).  Radio Shack sells the Ultrasonic sensor for $29.95 vs. the 89 cents I paid in China.  I bought 20 units a piece (which gave me a price break from 92 and 90 cents, respectively - and free shipping!).  I've bought quite a bit of stuff from China through a web site called <a href="http://www.aliexpress.com/" target="_blank">AliExpress</a>, which looks like an online mall for the Far East, and have had no problems with any of the vendors.  Granted, depending on the shipping method, delivery may take a while.  I also got the LED strips and LED strip mounting rails from this site.  Other stuff I got in the past were Arduino Mega 2560 for around $15 a pop and various forms of NeoPixels (strips of various densities and individual ones mounted on heat sinks - plan to use those for wearables or crafts), so I've had some successful dealing there.</p><ul><li><a href="http://www.aliexpress.com/item/Free-shipping-5pcs-Ultrasonic-Module-HC-SR04-Distance-Measuring-Transducer-Sensor-for-Arduino-Samples-Best-prices/2041955317.html" target="_blank">Ultrasonic Sensor Link</a></li><li><a href="http://www.aliexpress.com/item/Free-Shipping-HC-SR501-Adjust-Infrared-IR-Pyroelectric-Infrared-PIR-module-Motion-Sensor-Detector-Module-We/32263308396.html" target="_blank">PIR Sensor Link</a></li></ul><p>Both sensors are from the same vendor.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/14607-led-strip">LED Strip</a></h2>
                            <small class="authorship">6 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/14607#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-14607"><p>I am using an LED strip of bright white LEDs that have a density of 60 LEDs per meter.  I got 10 meters of the stuff.  The company was selling them in two 5 meter rolls.  I got them <a href="http://www.aliexpress.com/item/2-rolls-lot-60led-m-5V-3528-LED-Strip-white-warm-white-cold-white-non-waterproof/1404356041.html" target="_blank">here</a>.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/14786-tracks-are-in">Tracks Are In</a></h2>
                            <small class="authorship">6 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/14786#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-14786"><p>I just had the tracks for the LEDs delivered.  These will be mounted under the cabinets over the counter.  I got them from <a href="http://www.aliexpress.com/item/Led-Aluminum-Extrusion-Profile-for-LED-Strip-Light-Opal-PC-Cover-Factory-Direct-Sale/875394605.html" target="_blank">here</a>.</p><p><img src="https://cdn.hackaday.io/images/7986601425676076165.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/14795-pcbs-have-shipped">PCBs Have Shipped</a></h2>
                            <small class="authorship">6 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/14795#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-14795"><p>I've just received notice that my PCBs have been shipped.  I hope to get them by next weekend and if I do, I will be installing the lights under the cabinets.  I am getting them from <a href="http://dirtypcbs.com/index.php" target="_blank">Dirt Cheap Dirty Boards</a>.</p><p><img style="width: 422px; height: 295.1px;" src="https://cdn.hackaday.io/images/4727281425734479930.png"></p><p><img style="width: 423px; height: 295.8px;" src="https://cdn.hackaday.io/images/6438001425734525917.png"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/15076-pir-and-sonar-sensors-are-in">PIR and Sonar Sensors are in</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/15076#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15076"><p>I received the PIR and HC-SR04 sensors from China.  The PIR sensors are working fine.  The HC-SR04 sensors have a problem though.  These are the 4 pin models (VCC, GND, Trigger, and Echo) which is different than the Radio Shack model I have been using, which is 3 pin.  The 3 pin version multiplexes the trigger and echo.  This isn't the problem because I planned for the 4 pin model.  While these 4 pin Chinese models seem to provide a more stable reading (the 3 pin version seems to jitter a lot), if there is no return echo (i.e. you ping across a large space), they lock up.  The 3 pin RS model will time out after about 40 ms.  I read somewhere that this is because there is a faulty bit of code in these cheap Chinese versions.  I don't know if they can be reprogrammed.  </p><p>The only way to reset them is to power them down and back up again.  I have the Reset pin of the ATTiny85 on the connector for the sensors (in the event I wanted to repurpose the boards) and I could program the chip to use it as an I/O line to bounce the sonar when it gets in this state, but once you program the chip to not use the reset pin, you can't easily reprogram it.  There is some information that says you can use 12V on the reset pin to override this, but I will have to wait until I put together a programmer for it.  So for now, I will be using the 3 pin model.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/15117-the-boards-are-in">The Boards Are In!</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/15117#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15117"><p>Looks like my weekend is sorted!</p><p><span class="redactor-ie-paste"><br></span></p><img style="width: 339px; height: 451.86px;" src="https://cdn.hackaday.io/images/5496841426254787394.jpg"></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/15160-first-build">First Build</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/15160#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15160"><p>I built up the first board and did some tests.  All seems to be as planned.  I now need to drill out the holes in the project box and enclose everything.  I have the LED Track cut and drilled, ready to install.  The LED strips have been cut and joined (they are going to be installed in a corner cabinet area).</p><p><img style="width: 393px; height: 523.84px;" src="https://cdn.hackaday.io/images/8493311426334459310.jpg"><br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/15210-led-installed-and-working-but">LED Installed and Working, But...</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/15210#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15210"><p>I had to leave out the PIR sensor for now.  I had designed the board to use the 3x2x1 plastic enclosure that you can find in any Radio Shack.  I checked that I could fit the PIR and Sonar sensors into the lid (after drilling holes), but what I didn't count on was the room that the wires and pins would take up.  I couldn't fit everything in, so I need to find another project box that is relatively flat (the 1" depth exposes the box underneath the cabinet) and can accommodate everything.  Ideally, I want a box that is 4.5x2.5x0.75.</p><p>So I took out the PIR and have the sonar sensor pinging continuously.  It works well, but I think I'm going to do some sort of averaging algorithm on the readings.  The lowering of the intensity by lowering your hand from just under the sensor (activation) is jumpy and 'locks' too quickly (when it gets an erroneous reading, thinking the hand was removed).</p><p>Below is a demonstration.  What is interesting is the tapping you hear is the sonar sensor, but you can't hear it normally.  I guess my phone picks it up just like video cameras pick up IR light.</p><iframe width="500" height="281" src="//www.youtube.com/embed/Dw86ltQOdro" frameborder="0" allowfullscreen="" style="width: 500px; height: 281px;"></iframe></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4451/log/15416-i-got-skulled">I Got Skulled!</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4451/log/15416#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15416"><p>I would like to thank the Academy...</p><p>Seriously, the ability to share ideas and be inspired by others' creations is why I am on this site.  I suspect that the mention I got on the <a href="http://hackaday.com/2015/03/16/brighten-your-day-with-motion-controlled-cabinet-light/" target="_blank">Hackaday Blog</a> is the reason for the attention my project has gotten, lately, but it's nice to know people are interested in something that I've done.</p><p>Keep Hacking, everyone!</p></div>
                            </div>
                        </li>
                    
                </ul>

                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'nlM8qyJx-Tkq-aefmJ0Ca3bZ3vQmzXr63lQM';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>