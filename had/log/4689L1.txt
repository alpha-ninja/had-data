<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; Improve the Haber process &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F4689%2Flogs%3Fpage%3D1">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/4689-improve-the-haber-process">Improve the Haber process</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">See if ultrasonic cavitation can be used to fixate atmospheric Nitrogen less expensively than the Haber process.</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/56245-peter-walsh" title="Visit Profile">Peter Walsh</a><span>&bull;</span>
                
                5 months ago<span>&bull;</span><a href="/project/4689#discussion-list" title="See Comments">23 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/4689-improve-the-haber-process">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/4689/logs/sort/newest">Newest</option>
                    <option value="/project/4689/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/4689/log/15043-initial-todo-list">Initial Todo list</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15043#discussion-list">
                                    3 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15043"><p>Please bear with me, as I am *just* getting started creating the project, backfilling information, and everything else.</p><p>I hope to spend the next 5 days fleshing things out.</p><p>Todo:</p><p>1) Get dokuwiki running on my home server. Install a good theme, flesh out the link/file structure and organization.</p><p>2) Write background pages on the Bosch-Haber process, and other possible processes and reference material.</p><p>3) Write up a project roadmap - what steps to take in what order</p><p>4) Come up with an appropriate project image</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/15144-ultrasonic-power-supply-on-ebay-for-50">Ultrasonic power supply on eBay for $50</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15144#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15144"><p>Some surprising (to me, anyway) developments.</p><p>I had originally planned to build an ultrasonic power supply with plans, schematics and whatnot, and come to find one on eBay for $50. This unit will supply 385 watts, which is much more than the 50-watt unit I had planned to build. And it will save me hours of designing, testing, and building. </p><p><img src="https://cdn.hackaday.io/images/9418101426300271349.jpg"></p><p>After discovering that there are several names for what is essentially the same thing (thank you, eBay!), I redid my literature search and found <a href="http://www.collectionscanada.gc.ca/obj/s4/f2/dsk1/tape3/PQDD_0016/MQ57783.pdf">this paper</a> titled "Sonochernical Fixation of Nitrogen" where a graduate student at Ottawa does much of what I am proposing to do.</p><p>I haven't had time to read the paper in detail (only skimmed), but from a first impression of his experimental setup I'm guessing that he is not using a very high energy density (ie - the watts per square cm of his sonification is low), and he's sparging the gasses through a frit instead of using a pass-through probe with concentrator.</p><p>(It means he used a sort of aquarium air stone to bubble the gasses up through the solution. I didn't know either, I looked it up.)</p><p>So it *may* be that I'm looking in places where people have looked before, which means that my probability of success has dropped dramatically.</p><p>My original plan was to design a hobbyist-grade ultrasonicator that could be used for home sonochemistry experiments. That's a pretty interesting project in its own right, and I've always known that it's unlikely that I'll find anything.</p><p>Maybe in a few months will be the first "hackaday prize" entry featured as a "Hackaday Fail" :-)</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/15228-results-of-supenos-paper">Results of Supeno&#39;s paper, </a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15228#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15228"><p>I've had a chance to look over Supeno's paper <a href="http://www.collectionscanada.gc.ca/obj/s4/f2/dsk1/tape3/PQDD_0016/MQ57783.pdf">Sonochemical Fixation of Nitrogen</a> in detail.</p><p>Quickly summarizing his results: Ammonia and various nitrate compounds (depending on supplied gases) are formed when the gases are bubbled up through water and sonicated. The rate of formation is very low, in the neighborhood of nanomoles per minute per watt, depending on reaction and conditions.</p><p>Other papers report similar rates of formation, with results ranging from tenths of nanomoles to micromoles per minute per watt (pages 9-11 in the referenced paper).</p><p>This is actually good news. If <em>no</em> researcher had seen formation of nitrates or ammonia in sonication experiments, this would mean that some fundamental principle invalidates the model. Since <em>some</em> formation was seen, then the model is correct at some level.</p><p>Additionally, the wide range of results (nanomoles to micromoles per watt) indicates that the model is dependent on experimental conditions, and this opens the possibility that the model could be explored in creative ways.</p><p>That said, a hobbyist-grade sonicator in the 50-100 watt range is an interesting project in it's own right, so I'm still intending to build one of those, and publish the designs.</p><p>======</p><p>Ultrasonic transducers (normally used in cleaning baths) with power output up to about 120 watts are common on eBay, at a cost of about $20 - $50 depending on vendor and power. That's about right for a hobbyist unit, it's easily available, and shouldn't require extreme electronics for the driver (I think). </p><p><img src="https://cdn.hackaday.io/images/5884081426459205350.jpg"></p><p>So I'm thinking: one of these transducers inside an H-bridge driver, a two hundred volt DC power supply, a microcontroller to generate frequency and control power, and a machined horn to transfer energy to the reaction chamber.</p><p>A small sonicator could be used for other hobbyist purposes such as plastic welding, cleaning, (possibly) spot welding, cell disruption, drilling, and probably a bunch of other things I'm not thinking of.</p><p>So even without the Nitrogen aspect, it's still an interesting project. To me, at least.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/15454-initial-requirements">Initial Requirements</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15454#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15454"><p><img src="https://cdn.hackaday.io/images/4633341426894904213.png"></p><p>I've identified 7 components for the project: four electronics functions (in one package, presumably on one board) and three physical pieces, as shown in the diagram. My initial requirements are:</p><p>High Voltage DC supply:</p><ul><li>Supply (TBD) volts</li><li>Capable of 200 watts power</li><li>Galvanically isolated</li><li>Inexpensive/easily made</li><li>(Optional) Low voltage output to power electronics</li></ul><p>Switcher:</p><ul><li>Self-resonant (ie - automatically finds resonant frequency)</li><li>Can control power of transducer</li><li>Can measure transducer power</li></ul><p>Power control:</p><ul><li>Measure power level of transducer</li><li>Control power level delivered by switcher</li><li>On/Off control of DC supply</li><li>Timed on/off control of transducer</li><li>(optional) Remote computer control</li><li>(optional) Auxiliary relays for control of other equipment</li></ul><p>Display/User Input:</p><ul><li>Show current settings</li><li>Show timer countdown</li><li>Allow user to set power</li><li>Allow timed pulses</li></ul><p>Piezoezoelectric transducer:</p><ul><li>Easily available</li><li>Inexpensive</li></ul><p>Horn/Sonotrode:</p><ul><li>Tuned to transducer resonant frequency</li><li>Easily made (as easy as possible)</li></ul><p>Mounting bracket:</p><ul><li>Electrically insulated from transducer/horn</li></ul><p>====</p><p>I found <a href="http://www.imajeenyus.com/electronics/20110514_power_ultrasonic_driver/index.shtml">this site</a> describing making an ultrasonic drill... which is exactly what I plan to do! Woot!</p><p>His description is a little thin at places, so I will document the build process separately and in a different manner so that others will have both his and my descriptions for guidance.<br></p><p>I think his power supply circuit needs some changes, though (ie - as an instrument buildable/usable by others). It's fine for his uses, but I'd like something a little more automated and then I got an absolutely awful idea...</p><p>a perfectly wonderful, awful idea... and I need to do some experiments to see if it works and my inner Slytherin keeps saying "Bwa ha ha!" in the back of my mind.</p><p>There may be an easy, inexpensive way to build the HVDC supply using parts everyone has access to.</p><p>Stay tuned.<br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/15666-horn-complete-almost-ready-to-test">Horn complete, almost ready to test.</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15666#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15666"><p>Here's my completed<strong>(!)</strong> horn and clamp. I am one step away from trying to sonicate some liquid, and once the flu stops kicking my butt I should have 4 more build logs and some code ready. Hopefully before the end of this weekend.</p><p><img src="https://cdn.hackaday.io/images/3872561427348459646.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/15687-measuring-resonant-frequency-the-easy-way">Measuring resonant frequency, the easy way</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15687#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15687"><p><img src="https://cdn.hackaday.io/images/5374281427396887145.jpg" alt="" style="float: right; margin: 0px 0px 10px 10px;"></p><p>I bought a 50-watt Langevin-style transducer from eBay, which should be plenty for this application.<br></p><p>To make the tuned horn we need to determine the transducer's resonant frequency. There are two ways to do this: the easy way, and the lazy way.</p><p>Note: I am retracing the steps from Lindsay Robert Wilson's <a href="http://www.imajeenyus.com/electronics/20110514_power_ultrasonic_driver/index.shtml">excellent website</a> where he builds essentially the same device. If you don't understand something here, check out his site for a counterpoint description.</p><p><img src="https://cdn.hackaday.io/images/8583281427396903912.png" alt="" style="width: 289px; height: 300.115384615385px; float: right; margin: 0px 0px 10px 10px;"></p><p>A piezoelectric transducer appears as a series-resonant L-C circuit. The electrodes on either side of the piezo plate form a capacitor, and the resonating mass acts as an inductance.</p><p>(It's actually a bit more complicated than this, but this is a good approximation.)<br></p><p>Driving the transducer at its resonant frequency achieves maximum power transfer from the transducer into whatever we're sonicating, so we need to determine what that frequency is. This will be useful when we design the power supply driver, and also when making and tuning the horn. More on those subjects later.<br></p><h2>Measuring resonant frequency, the easy way<br></h2><p>Current through the transducer is dependent on the impedance, which in turn is dependent on frequency. If we put a sense resistor in series with the transducer, the voltage drop will indicate the amount of current through the transducer.</p><p>At resonance, the impedance of the transducer is minimum and maximum current will flow. This same current causes a voltage drop in the sense resistor, and the maximum current (at resonance) will show the maximum voltage.</p><p><img src="https://cdn.hackaday.io/images/1136371427401467581.png" alt="" style="width: 479px; height: 234.177777777778px; float: right; margin: 0px 0px 10px 10px;"></p><p>So to find the resonant frequency:</p><ol><li>Mount the horn so that it is not mechanically linked to anything (ie - hang it by rubber bands).</li><li>Set up the circuit as shown.</li><li>Set the signal generator for 1V p-p output.</li><li>Adjust the frequency for maximum voltage.</li><li>The frequency at which maximum voltage is seen is the resonant frequency.</li></ol><table><tbody><tr><td><img src="https://cdn.hackaday.io/images/450671427402068478.jpg" alt="" style="width: 278px; height: 222.215588723051px; float: right; margin: 0px 0px 10px 10px;"><br><br><br><br>Here's my transducer hanging on a rubber band, connected to the electronics stack.<span class="redactor-invisible-space"></span></td><td></td></tr></tbody></table><p><img src="https://cdn.hackaday.io/images/3155911427402742146.jpg" alt="" style="float: right; width: 297px; height: 324.119293078056px; margin: 0px 0px 10px 10px;"></p><p>And I get: 27,920 Hz.</p><p>You can use a multimeter (AC scale) or a scope to measure voltage, and a frequency counter or a scope to measure frequency. I'm using both methods to better show what's going on.</p><p>According to the transducer documentaiton, the resonant frequency should be 28,000 Hz, plus-or-minus 1 KHz.</p><p>So my transducer is definitely within spec, and I now have the information I need to create a tuned horn attachment.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/15888-progress-report">Progress report </a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/15888#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-15888"><p>I won the first interim prize! Woot! Thank you Mike, and everyone who brings us Hackaday - you people rock!</p><p>I've made much progress despite not having any logs to show for it. Mainly due to catching the flu, and then having to catch up from not doing things while having the flu.<br></p><p>====</p><p>On a whim I ordered an ultrasonic cleaner power board from eBay to see if it held any value to the hobbyist.</p><p>To my complete surprise, it came with a 100 watt transducer and instructions! This appears to be an error on the part of the vendor (<a class="seller-id" title="beliefing user ID, click for member's profile" href="http://www.ebay.com/usr/beliefing?_trksid=p2060353.m2749.l2754">beliefing</a>), but they didn't respond when I msg'd them about it so... thanks eBay!</p><p>Here's the new transducer and supply, along side the original (50 watt) one for comparison:</p><p><img src="https://cdn.hackaday.io/images/7665741427826144553.jpg"></p><p>I *think* the power supply is insufficient for our needs - the instructions say the board will overheat if the transducer is  not attached to anything. With nothing connected (ie - no water bath) the transducer oscillates at resonance, and probably draws too much power from the board. </p><p>In other words, the unit can't actually supply 100 watts without overheating. More on this later, once I've had a chance to analyze the circuit.</p><p>====</p><p>I wrote an Arduino program to generate square waves and automatically measure the resonant frequency of transducer/horn assemblies. This is the "lazy" way mentioned in the previous post, and uses hardware that's more readily available to the hobbyist (ie - an arduino). If you don't have a signal generator or frequency counter (or scope), then an arduino or similar should work. This will be in the next log.</p><p>I also built a jig to suspend the transducer/horn while measuring resonance. A solid connection would cause the system to resonate at a different frequency.</p><p><img src="https://cdn.hackaday.io/images/245741427826882780.jpg"></p><p>====</p><p>And finally, I managed to score a 4' long 1.75"" diameter aluminum rod from the local metal recycler (for $0.80/lb), which means I can cut horns for the small transducer as needed without going to the trouble of casting them.</p><p>(The big transducer has a considerably wider end, and will probably require cast'ed horns. I'll be describing this process in a future post.)</p><p>Here's some pics of the rod, and a 1:1 step horn made from it. I've got a particularly evil idea that I'd like to try using the 1:1 horn once the power supply is up and running.</p><p>Please follow the project if you'd like updates when stuff is added.</p><table><tbody><tr><td><img src="https://cdn.hackaday.io/images/1609481427827427323.jpg" alt=""><br></td><td></td><td><img src="https://cdn.hackaday.io/images/9139201427827779491.jpg" alt=""></td></tr></tbody></table></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/16065-measuring-resonant-frequency-the-easier-way">Measuring resonant frequency, the easier way</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/16065#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16065"><h2></h2><h2>TL;DR<br></h2><p>A few passive components and an Arduino can measure the resonant frequency of a transducer in an automated fashion. This will come in handy when tuning the horn.</p><p>The circuit schematic is at the bottom of this post, and the program will be available on GitHub presently. Feel free to skip the gory details.</p><hr><p>NB: As an experiment I am posting the circuit design in the style of an academic exercise in great gory detail, and I'm looking for feedback on presentation and style. Please help me out. If you think this is tedious and wasteful and too simplistic or something let me know and I'll adjust the style in future logs.</p><h2><hr></h2><h2>Measuring resonant frequency, the easier way<br></h2><p>If you don't have a sweep frequency generator and/or a scope and frequency counter you can use an Arduino to measure the transducer resonant frequency. We'll need to do the measurement several times to tune the horn, so it makes sense to have a way to do this with as little effort as possible.</p><p>The block diagram circuit looks like this:</p><p><img src="https://cdn.hackaday.io/images/2826981428115927707.png"></p><p>But before we hook everything up, it's a good idea to see if this is likely to work.</p><h2><hr></h2><h2>Design question 1: Can the Arduino source enough current?</h2><p>According to the Atmel 328P <a href="http://www.atmel.com/images/Atmel-8271-8-bit-AVR-Microcontroller-ATmega48A-48PA-88A-88PA-168A-168PA-328-328P_datasheet_Complete.pdf">datasheet</a> (table 28.1: Absolute Maximum Ratings) the maximum DC current per I/O pin is 40 mA.</p><p>Assuming a worst case scenario when the transducer shows zero impedance, a 5V output will push 50 mA through the 100Ω resistor, and that's too much for the micro to handle.</p><p>However, the high-level output of the micro is less than 5 volts. According to the datasheet (Table 28-1. Common DC characteristics), the minimum high-level output is 4.2 volts with no "typical" or "max" values specified. Actually measuring the Arduino shows the output as 4.2 volts, so the measurement circuit will draw only 42mA .</p><p>And since a square wave is only high for 50% of the time the effective current is cut in half, so the DC current is actually 21 mA.</p><p>This is well within the rated 40 mA, so it looks like the Arduino can supply the necessary current.</p><h2><hr></h2><h2>Design question 2: Can the Arduino generate a fast enough frequency?</h2><p>The fastest clock prescaler in the Arduino is 1-to-1 with the CPU speed, which is also the crystal speed, which is 16 MHz.</p><p>The resonant frequency of the transducer is nominally 28<span class="_Tgc"><b>±1</b></span> kHz, so supposing we want to sweep between 24 and 32 kHz, the number of ticks per squarewave cycle is:</p><p><img src="https://cdn.hackaday.io/images/5907191428113348469.png"></p>Each square wave cycle has two parts: one counter cycle of high output, followed by one counter cycle of low output, so the actual counter values to generate the square waves are:<p><img src="https://cdn.hackaday.io/images/7684191428128108974.png"></p><p>This seems reasonable. We can set timer 1 to one of these values or anything in between, set the OCR1A output to "toggle on counter reset", and the system will automatically generate a squarewave output.</p><hr><h2>Design question 3: Does the Arduino have enough frequency resolution?</h2><p>Looking at the fastest frequency (250 counts, 32 kHz), we note that the next lower frequency will be 251 counts which generates 31.872 Hz, for a difference of 127.5.</p><p>Looking at the slowest frequency (333 counts, 24024 Hz) the next higher frequency will be 332 counts which generates 24096 Hz for a difference of 72 Hz.</p><p>So we can expect the Arduino to test and measure frequencies in steps of about 100 Hz.</p><p>This isn't great resolution, but it's comparable to what you can get using an analog signal generator and a steady hand.</p><p>There's a way to get much better resolution by doing extra processing in the micro, but I'll leave that for a later post. For now this should suit our needs.</p><hr><h2>Designing the rectifier/integrator</h2><p>The transducer will turn the square wave into a sine wave which goes both above and below the ground plane. We need to block the negative half and convert from AC to DC before connecting to the analog input.</p><p>(Any input of the Arduino will be damaged by a negative voltage, and the AtoD only measures DC.)</p><p>So, something like this:</p><p><img src="https://cdn.hackaday.io/images/1355951428132833963.png" style="width: 489px; height: 305.753684210526px;"></p><h2><hr></h2><h2>Design question 4: What values of R and C should be used?</h2><p>Now we need to choose values for R and C.</p><p>Looking at the frequency/count table above, a full frequency sweep will test 250 through 333 counts inclusive, or 84 tests total.</p><p>For each test, if we generate the frequency for 0.1 seconds and then measure the AtoD, a full frequency sweep will take about 9 seconds, which seems reasonable.</p><p>So we need the integrator to settle down to its final voltage within 0.1 seconds, which means that the time constant has to be short relative to that value. Perhaps 1/10 of that, so T = RC = 0.01 seconds.</p><p>So reasonable values might be 0.1 uF for C and 100K for R.</p><h2><hr></h2><h2>Design question 5: Will ripple be a problem?</h2><p>Converting AC to DC leads to voltage ripple in the output waveform. The capacitor will charge in response to an AC pulse, then discharge when the pulse goes away. The end result is a slightly varying DC voltage, and the AtoD will see different values at different times. We need to see if this will be a problem.</p><p><img src="https://cdn.hackaday.io/images/8796811428118628546.png"></p><p>We can estimate the ripple by thinking of the capacitor discharging through the resistor after the voltage passes the AC peak.</p><p>Starting with "Ohms Law" for capacitors:</p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20I%20%3D%20C%20%5Cfrac%7BdV%7D%7BdT%7D" title="\color{White} \large I = C \frac{dV}{dT}" alt="\color{White} \large I = C \frac{\\MakeLowercase{d}V}{\MakeLowercase{dt}}">We can rearrange this as:</p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20dT%20%5Cfrac%7BI%7D%7BC%7D%20%3D%20dV" title="\color{White} \large \color{White} dT \frac{I}{C} = dV" alt="\color{White} \large \color{White} \large \color{White} dt \frac{I}{C} = dV"><br></p><p>(T, being time, should be lower case here, but I can't seem to convince the HAD Latex editor to do that. Please bear with it.)</p><p>The <em>dt</em> term is the time between pulses, which is 1/frequency. The worst case in our frequency sweep is 24 kHz, for which the pulses arrive in 42 uS intervals (longest time between pulses, resulting in the longest decay time).</p><p>The current term "I" is the current taken away from the capacitor by the resistor, which is V (at the peak) divided by R. Substituting, we get:</p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20dt%20%5Cfrac%7BV%7D%7BRC%7D%20%3D%20dV" title="\color{White} \large \color{White} \large \color{White} dt \frac{V}{RC} = dV" alt="\color{White} \large \color{White} \large \color{White} dt \frac{V}{RC} = dV"></p><p>We noted previously that the maximum voltage is about 4.2 volts, minus the voltage drop of the diode (0.7 volts), so the worst cast voltage peak should be about 3.5 volts.</p><p>And we supposed previously that our time constant T = RC is about 0.01 seconds, so plugging everything in we get:</p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20%5Clarge%204.2%20%5Ctimes%2010%5E%7B-5%7D%20%5Ctimes%20%5Cfrac%7B3.5%7D%7B0.01%7D%20%3D%20dV" title="\color{White} \large \color{White} \large 4.2 \times 10^{-5} \times \frac{3.5}{0.01} = dV" alt="\color{White} \large \color{White} \large 4.2 \times 10^{-5} \times \frac{3.5}{0.01} = dV"><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%200.0147%20%3D%20dV" title="\color{White} \large 0.0147 = dV" alt="\color{White} \large 0.0147 = dV"><br></p><p>Since our peak voltage is 3.5 volts, that's a ripple voltage of 1 part in 238, or about 0.5%. </p><p>The Arduino AtoD input has 10 bits of precision, and so can measure as little as 1 part in 1024. The ripple voltage should be within the lowest 2 bits of the AtoD converter.</p><p>In reality the peak voltage will be less than 3.5 volts since the transducer will never have zero impedance, and this will make the ripple voltage a bit less than calculated.</p><p>Also, we approximated the ripple by assuming that the capacitor would discharge over the full time period. In reality, the capacitor only discharges to the point where the next pulse arrives, as shown here:</p><p><img src="https://cdn.hackaday.io/images/6499831428120987983.png"></p><p>We also played fast and loose with the differential in the equation above by breaking it into two pieces. In reality the capacitor discharges exponentially (not linearly, as shown), but this works out in our favor because beyond the first moment of discharge the capacitor discharges more slowly than calculated.</p><h2>The final circuit:</h2><p>So the final circuit looks something like this:</p><p><img src="https://cdn.hackaday.io/images/5759571428132963012.png"></p><p>I  checked the output using a scope, and found not a hint of ripple. More importantly, the output doesn't look like it will damage the Arduino.</p><p>A little bit of perfboard, and here's the final result:</p><p><img src="https://cdn.hackaday.io/images/2419071428127043749.jpg"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/16096-back-of-the-envelope-calculation">Back of the envelope calculation</a></h2>
                            <small class="authorship">5 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/16096#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16096"><p>Improving the Bosch-Haber process is a challenging problem, so before I embark on any particular action it's probably a good idea to see if there's any chance of succeeding.</p><p>As the saying goes, four hours in the lab will save you an hour in the library...</p><p>NB: I am not actually a chem major, so if you see an error in the analysis, please let me know!</p><hr><h2>Where to find information</h2><p>Several researchers have looked into ultrasonic nitrogen fixation. For the technical reader, <a href="http://www.collectionscanada.gc.ca/obj/s4/f2/dsk1/tape3/PQDD_0016/MQ57783.pdf">"Sonochemical Fixation of Nitrogen"</a> by Supeno is a good starting point. The paper reviews the previous research and explains the various processes, including cavitation, chemical reactions, solubility, kinematics, and so on.<br></p><p>If you want more information on the problem I'm trying to solve, that's a good place to start.<br></p><p>For a good overview of the ways nitrogen may be fixed, try <a href="http://library.sciencemadness.org/library/books/fixation_of_atmospheric_nitrogen.pdf">"Fixation Of Atmospheric Nitrogen"</a> by Frank Ernst. Published in 1928, it gives a little of the history of nitrate usage, and explains in detail the various methods of producing it.<br></p><p>Chapter 1 (history) has an interesting take on WWI:</p><blockquote>It is quite generally believed that Germany declared war in 1914 only after assuring herself that she had a suitable source of fixed nitrogen within her own borders. The rate of consumption of nitrogen in explosives during this war was undoubtedly far beyond the expectations of any individual or nation. In order to meet this demand it was necessary, even with the enormous expansion of the rather young atmospheric nitrogen fixation industry, to stint agriculture. How great an effect this had on the eventual result is rather difficult to appraise, but there Is no doubt that the people of several of the warring nations suffered materially and still show the effects of malnutrition.</blockquote><p>If you just want the basics of the Bosch-Haber process, <a href="http://www.ausetute.com.au/haberpro.html">this link</a> is pretty good.</p><p>For more detail on why ammonia fixation plants are so expensive, check out <a href="http://coecs.ou.edu/Richard.G.Mallinson/gradkinetics/pdf/Case%20Study%20106.pdf">"Chemical Reactor Design For Process Plants, Vol II"</a> by Howard F. Rase. It's an Ammonia fixation plant case study, and has all the gory details. Not for the faint of heart, guaranteed to make your head spin.<br></p><hr><h2>Energy required for Bosch-Haber</h2><p>According to <a href="http://pimlico.phys.appstate.edu/JSRESA/kelischek.1-1.pdf">this link</a>, Nitrogen from the Bosch-Haber process requires 34.5 Gigajoules per metric ton (mt) of nitrogen produced. I can't tell if that's nitrogen produced or ammonia produced, but it doesn't matter because they weigh about the same and this calculation is only approximate.</p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20%5Clarge%2034.5%20%5Ctimes%2010%5E%7B9%7D%20%5Cfrac%7BJoule%7D%7Bmt%7D%20%5Ctimes%201%20%5Cfrac%7Bmt%7D%7B1000%20kg%7D%20%5Ctimes%201%20%5Cfrac%7Bkg%7D%7B1000g%7D%20%5Ctimes%2017%20%5Cfrac%7Bg%7D%7Bmole%7D%20%3D%20586500%20%5Cfrac%7BJ%7D%7Bmole%7D" title="\color{White} \large \color{White} \large \color{White} \large \color{White} \large 34.5 \times 10^{9} \frac{Joule}{mt} \times 1 \frac{mt}{1000 kg} \times 1 \frac{kg}{1000g} \times 17 \frac{g}{mole} = 586500 \frac{J}{mole}" alt="\color{White} \large \color{White} \large \color{White} \large \color{White} \large 34.5 \times 10^{9} \frac{Joule}{mt} \times 1 \frac{mt}{1000 kg} \times 1 \frac{kg}{1000g} \times 17 \frac{g}{mole} = 586500 \frac{J}{mole}"><br></p><p>So Bosch-Haber requires over half a million joules to create one mole of ammonia.<br></p><p>To put this in perspective, 1 mole of ammonia weighs 17 grams, and that many joules will run a 100 watt incandescent bulb for over 90 minutes. Yow.</p><p>And this for a chemical reaction that <em>gives off</em> energy in the process. Quite a lot of it, actually:<br></p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20%5Ccolor%7BWhite%7D%20%5Clarge%20N_%7B2%7D%20%2B%203%20H_%7B2%7D%20%5Crightarrow%202%20NH_%7B3%7D%20%20%20%2B%20184800%20J" title="\color{White} \large \color{White} \large N_{2} + 3 H_{2} \rightarrow 2 NH_{3}   + 184800 J" alt="\color{White} \large \color{White} \large N_{2} + 3 H_{2} \rightarrow 2 NH_{3}   + 184800 J"></p><p>To put <em>that</em> in perspective, this is about <a href="http://en.wikipedia.org/wiki/Wood_fuel#Energy_content">a third of the energy</a> you would get from burning the same mass of wood.</p><p>The reason the reaction doesn't easily happen - the reason we can't simply ignite the gases like so much paper - has to do with the interplay of the activation energy (breaking the N2 apart) and the entropy. When you heat the gases enough to start the reaction, the reaction is no longer favored and the reverse reaction happens instead. Ammonia breaks down into nitrogen.</p><p>This is actually a good thing, otherwise a lightning strike would ignite the atmosphere, oxidizing all the nitrogen and turning rain into nitric acid.</p><p>I'll post a more complete explanation in a future log. For now, the target to beat appears to be about half a million joules per mole.</p><hr><h2>Energy required for sonication</h2><p>According to <a href="http://www.ncbi.nlm.nih.gov/pubmed/11602996">another</a> Supeno paper, the maximum rate of ammonia produced was 4 nmol/min/W. Converting to Joules and moles:<br></p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%204%20%5Ctimes%2010%5E%7B-9%7D%20%5Cfrac%7Bmol%7D%7BW%5Ctimes%20minute%7D%20%20%5CRightarrow%202.5%20%5Ctimes%2010%5E%7B8%7D%5Cfrac%7BW%5Ctimes%20minute%7D%7Bmol%7D" title="\color{White} \large 4 \times 10^{-9} \frac{mol}{W\times minute}  \Rightarrow 2.5 \times 10^{8}\frac{W\times minute}{mol}" alt="\color{White} \large 4 \times 10^{-9} \frac{mol}{W\times minute}  \Rightarrow 2.5 \times 10^{8}\frac{W\times minute}{mol}"><br></p><p><img src="/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%202.5%20%5Ctimes%2010%5E%7B8%7D%5Cfrac%7BWatt%5Ctimes%20minute%7D%7Bmol%7D%20%5Ctimes%2060%20%5Cfrac%7Bseconds%7D%7Bminute%7D%20%5Ctimes%201%20%5Cfrac%7BJoule%7D%7BWatt%20%5Ctimes%20second%7D%20%3D%201.5%20%5Ctimes%2010%5E%7B10%7D%20%5Cfrac%7BJoules%7D%7Bmole%7D" title="\color{White} \large 2.5 \times 10^{8}\frac{Watt\times minute}{mol} \times 60 \frac{seconds}{minute} \times 1 \frac{Joule}{Watt \times second} = 1.5 \times 10^{10} \frac{Joules}{mole}" alt="\color{White} \large 2.5 \times 10^{8}\frac{Watt\times minute}{mol} \times 60 \frac{seconds}{minute} \times 1 \frac{Joule}{Watt \times second} = 1.5 \times 10^{10} \frac{Joules}{mole}"></p><hr><h2>Target for this project<br></h2><p>Comparing the Bosch and sonification energies:</p><p><img src="http://hackaday.io/api/latex?tex=%5Ccolor%7BWhite%7D%20%5Clarge%20%5Cfrac%7B1.5%5Ctimes%2010%5E%7B10%7D%7D%7B586500%7D%20%3D%2025575" alt="\color{White} \large \frac{1.5\times 10^{10}}{586500} = 25575"></p><p>So for purposes of this project, I need to improve the efficiency of sonification by a factor of about 25,000.</p><p>This isn't quite as bad as it looks.</p><p>For one thing, I think I can get a factor of 10 (and maybe as much as 100) using a highly tuned transducer horn. It wasn't clear from Supeno's paper, but from his description it looks like he's using a water bath, similar to an ultrasonic cleaner, and he makes no mention of tuning the chamber or transducer. Even if he's running the <em>system</em> at resonance, he may not be running the <em>transducer </em>at resonance, and this will reduce his efficiency.</p><p>There's also an interesting quote from his abstract:</p><blockquote>The decrease in the rate with bulk temperature suggests that kinetics, rather than thermodynamics, is the limiting condition for sonochemical synthesis of ammonia.</blockquote><p>There seems to be no chemical or physical reason why sonification can't work, and the comment above seems to indicate that changes in the experimental setup (geometry, reaction profile, and such) might affect the efficiency.</p><p>I'm quite looking forward to trying.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/4689/log/16375-reverse-engineering-a-cheap-ebay-ultrasonic-power-supply">Reverse engineering a cheap eBay ultrasonic power supply</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/4689/log/16375#discussion-list">
                                    19 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16375"><h2>TL;DR</h2><p>I purchased and reverse engineered a cheap eBay ultrasonic power supply, to see if it held any value for the hobbyist.</p><p>This first post explains the process of reverse engineering the (or any) board.</p><p>A subsequent post will discuss the specifics of this board.<br></p><p>NB: Can anyone tell me what R4  (1 ohm, 5 watt) does in the schematic below?</p><h2><hr></h2><h2>How to reverse engineer a simple PCB</h2><p>Dave Jones posted a <a href="https://www.youtube.com/watch?v=lJVrTV_BeGg" target="_blank">great video</a> (from his <a href="http://www.eevblog.com/2014/10/22/eevblog-675-how-to-reverse-engineer-a-rigol-ds1054z/" target="_blank">blog</a>) showing how to reverse engineer a PCB. He prints and overlays transparencies of the board top and bottom, so that he can visually align the traces with the components.<br></p><p>I did essentially the same thing, but within a paint program - eliminating the need for physical copies. This has some advantages over his method (zoom, annotation, and contrast adjustment), but some disadvantages as well (small visual aperture).</p><h2>Step 1: Take a picture of the top and bottom of the PCB</h2><table><tbody><tr><td><img src="https://cdn.hackaday.io/images/1472701428695159317.jpg" alt="" style="width: 309px; height: 231.100840336134px;"></td><td><img src="https://cdn.hackaday.io/images/7478551428695201076.jpg" alt="" style="width: 288px; height: 232.781954887218px;"></td></tr></tbody></table><h2>Step 2 Flip and flood</h2><p>Flip the trace image left-for-right, and flood-fill the copper traces with a high-contrast color. Use the pen/brush tool to touch up areas that didn't fill properly (ie - the shiny, reflective bit in the image above).</p><p><img src="https://cdn.hackaday.io/images/1844931428695267830.jpg" style="width: 381px; height: 283.845px;"></p><h2>Step 3: Make a sandwich image</h2><p>Compose a 3-layer image with the components image on top, the traces in the middle, and a white bottom layer. Set the bottom (white) layer opacity to 100%, and adjust the opacity of the trace and component layers to give a nice X-ray view of the board.</p><p>(This will be specific to your eye sensitivity and the characteristics of your display, so adjust to taste. For my setup, the best settings seem to be White: 100%, Trace 100%, Components: 78%.)</p><p>Rotate and adjust the trace layer so that the holes in the trace layer line up with the components.</p><table><tbody><tr><td><img src="https://cdn.hackaday.io/images/2252931428696415020.jpg" alt="PCB X-ray view" style="width: 325px; height: 242.125px; display: block; margin: auto;"></td><td><img src="https://cdn.hackaday.io/images/5329111428696440806.jpg" style="width: 365px; height: 180.966386554622px;"></td></tr></tbody></table><h2>Step 4: Zoom and annotate</h2><p>The image can be zoomed and annotated as needed. Also, sections and components can be erased once deciphered. (I found this particularly useful - certain sections are "distracting", and blocking them helps me concentrate on other sections.)</p><p><img src="https://cdn.hackaday.io/images/3993651428696835262.jpg" alt="" style="width: 164px; height: 202.443890274314px; margin: auto; display: block;"><span></span><br></p><hr><p>The results: a shiny, new annotated schematic, ready for the surgeon's table:</p><p><img src="https://cdn.hackaday.io/images/7072041429147990549.png"></p><p>A high-resolution version of this (pdf and svg) will be available on GitHub presently, as well as the KiCad schematic.</p><p>Discussion of this specific circuit will be in a subsequent log.</p></div>
                            </div>
                        </li>
                    
                </ul>

                
                <div class="pagination">
                    
                    
                    <a href="?page=2" class="grey-gold-button next-button show">Next</a>
                    
                </div>
                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = '961EGDvy-O0QRntBZrD4zzDNFYjYlPN548ew';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>