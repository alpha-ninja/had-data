<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; GPS Disciplined TCXO &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F6872%2Flogs%3Fpage%3D3">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/6872-gps-disciplined-tcxo">GPS Disciplined TCXO</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">A DIY GPS disciplined 10 MHz reference clock</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/45439-nick-sayer" title="Visit Profile">Nick Sayer</a><span>&bull;</span>
                
                a month ago<span>&bull;</span><a href="/project/6872#discussion-list" title="See Comments">4 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/6872-gps-disciplined-tcxo">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/6872/logs/sort/newest">Newest</option>
                    <option value="/project/6872/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/6872/log/22153-prototype-2">Prototype #2</a></h2>
                            <small class="authorship">14 days ago  &bull;
                                <a class="gray-link" href="/project/6872/log/22153#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22153"><p>I got the second prototype boards today. They swap out the ATMega328 for an ATTiny4313, which worked perfectly. Unfortunately, it does require me to abandon the Arduino IDE, firstly because there isn&apos;t enough flash for the whole thing and the Arduino libraries, and secondly because my ATTiny mods for my (ancient) version of Arduino don&apos;t support the 4313.</p><p>It wasn&apos;t so bad, though. This project doesn&apos;t use Liquid Crystal, and translating the serial I/O stuff into direct register calls turned out to be quite simple.</p><p>For the next set of boards, I&apos;ve decided to put a buck converter on the board rather than continuing to use the LT1117 3.3v LDO. I&apos;ve made good use of the MC34063 on my Hydra and OpenEVSE II projects, and believe I can come up with something that will make less ripple than the LDO and wall wart combination are doing presently. At least, I hope so.</p><p>Hopefully, that will be the final design.</p><p>Meanwhile, I was able to hook the first prototype up to an Agilent frequency counter at work. It said that the board was running 7 Hz slow, but there&apos;s no telling how accurate its own internal timebase is. What it did say, however, was that it was staying within 0.01 Hz of what it was reading, which is 1 ppb. So that&apos;s a good sign. I&apos;m going to try and read the manual to figure out some of the statistics that it can gather. I think it can give me a standard deviation value, which would be almost as valuable as an Allen deviation plot.</p><p>Meanwhile, according to the debug serial output, prototype number 2 is presently showing a drift of less than 600 ppt over the last 500 seconds. My own frequency counter shows 10.00001 MHz, but the next step will be to attempt to use the output of this board as that counter&apos;s reference.</p><p>EDIT: I also found an Agilent N5182A signal generator. That one had a calibration sticker on it. I fed the same frequency counter&apos;s reference input from the GPSDO and had it measure the frequency of the N5182A, which it said was 0.0465 Hz high. That means that the two were 4.65 PPB (or so) apart.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/22284-optimizing-the-design">Optimizing the design</a></h2>
                            <small class="authorship">12 days ago  &bull;
                                <a class="gray-link" href="/project/6872/log/22284#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22284"><p>In thinking about DFM (design for manufacture), you always, of course, think about shaving pennies here and there.</p><p>The prototypes use an LTC2050 chopper amp as the buffer between the DAC and the oscillator. That chip is <em>really</em> expensive. It&apos;s $2.90 for one, $2.33 each for 100 and then it jumps down to $1.30 each for Q:500.</p><p>I spent a little time looking around DK this evening and came across the AD8538. It&apos;s not quite as zero-drifty, but for this application, I&apos;m not entirely sure how important that really is. What this design requires is excellent short-term stability of all of the components. The long term stability will be taken care of by the feedback loop with GPS.</p><p>The big spec differences: The AD8538 slew rate is faster and the gain bandwidth is lower. Neither of those matter, as the DAC is only every going to change once every ~50 seconds or so, and the amp is being used at unity gain. The input offset voltage is 10 times worse - 5 &#xB5;V instead of 0.5 &#xB5;V. But our DAC step voltage is ~50 &#xB5;V (3.3 / 65536), so I&apos;m not sure that matters so much.</p><p>But where the rubber hits the road is that the AD8538 is $1.52 for one, and has a much nicer volume discount structure, with the price dipping under $1 at Q:250 and a full reel of 3000 at 64&#xA2; each.</p><p>I think it&apos;s worth building another prototype with one to see if it&apos;s any less stable.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/22396-more-developments">More developments</a></h2>
                            <small class="authorship">9 days ago  &bull;
                                <a class="gray-link" href="/project/6872/log/22396#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22396"><p>I found a particularly egregious firmware error. That error pretty convincingly explains the 4 ppb difference observed against the calibrated signal generator at work. I thought 4 ppb was pretty good, but it may be even better when I try it again tomorrow.</p><p>I&apos;ve analyzed the power bus some more. It appears that the majority of the ripple and noise on it may be coming from the oscillator. It&apos;s too late for the current run of boards, but I am going to try adding a ferrite bead between the two decoupling caps on the Vcc pin to see if I can squelch some of that. If I put a 50 MHz low-pass digital filter in place on my scope I see absolutely nothing at all on the 3.3 volt rail, which is kind of what you&apos;d expect from using an LDO. We&apos;ll have to see how much garbage comes out of my buck converter design.</p><p>I expect the first batch of &quot;production&quot; boards towards the end of the week.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/22581-last-minute-firmware-changes">Last minute firmware changes</a></h2>
                            <small class="authorship">7 days ago  &bull;
                                <a class="gray-link" href="/project/6872/log/22581#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22581"><p>It&apos;s been a couple days of playing with the firmware.</p><p>I decided to change the LOCK LED blink patterns again. It was a little tough sometimes to tell the difference between the slow and medium speeds. So now, it&apos;s one, two or three blinks per second. It&apos;s much more clear that way.</p><p>Also, the firmware obtains a lock much more quickly now, and writes the trim value to EEPROM a little bit more readily (hopefully not more frequently). The result of that is that on &quot;warm&quot; starts, it should have a lock in 16 minutes 40 seconds, and on &quot;cold&quot; starts, it should show something within 20 minutes.</p><p>I believe I&apos;m going to send the three prototype boards I have now in to Hackaday for the Best Product submission. The final production boards will be here on Thursday, but the prototypes are the same in every way that&apos;s going to matter, and, well, waste not, want not.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/22854-on-sale-now">On sale now</a></h2>
                            <small class="authorship">4 days ago  &bull;
                                <a class="gray-link" href="/project/6872/log/22854#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22854"><p>They&apos;re on sale not at Tindie: <a href="https://www.tindie.com/products/nsayer/gps-disciplined-ocxo/">https://www.tindie.com/products/nsayer/gps-disciplined-ocxo/</a></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/22902-some-operational-observations">Some operational observations </a></h2>
                            <small class="authorship">4 days ago  &bull;
                                <a class="gray-link" href="/project/6872/log/22902#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22902"><p>I&apos;ve been logging the debug output of one unit for about a day now.</p><p>It took an hour or so for the oscillator to really settle in to stability. It looks like at least for the first time it needs to warm up before the lock really stays stable. </p><p>The good news is that the performance doesn&apos;t appear to have been changed any by the new power supply. There is some 10 MHz noise, but I am going to add a ferrite bead to the next design to try and squelch that. </p><p>As of now, the oscillator slowly wanders over a discipline range of around 5.6 ppb. My guess is that that represents the short term inaccuracy of GPS. The error from GPS over a 1000 second window shows an approximately normal distribution with a standard deviation inside of 1, and none landing outside of +/- 7 (units are 0.1 ppb), so it&apos;s keeping inside of 1 ppb from GPS.</p><p>Recall that that 1000 second window consists of a rolling collection of ten 100 second windows actually used to discipline the oscillator.  Those error samples are all inside of +/- 2, and most are zero with occasional excursions of one or two entries in a row that quickly return. Those units are 1 ppb, but it&apos;s more likely those represent GPS wobble or that they represent small phase errors resulting in leading edge threshold excursions of far less than the measurement granularity. </p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/23659-further-improvements">Further improvements</a></h2>
                            <small class="authorship">a day ago  &bull;
                                <a class="gray-link" href="/project/6872/log/23659#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-23659"><p>I posted about this project to the Time Nuts mailing list. For those unfamiliar, this is a fairly well established group of folks take all aspects of time and frequency measurement accuracy quite seriously.</p><p>Some folks there raised some concerns about the design.</p><p>One of the objections I can address without blowing the design budget is the granularity of the DAC.</p><p>One of the folks there suggested that my calculation of the control granularity at 370 ppt was overly optimistic. He says that the &#xB1;10 ppm tuning range is actually a minimum value and that the non-linearity (&#xB1;5%) might further work against me. It&apos;s entirely possible that the <em>actual</em> impact of incrementing or decrementing the DAC might be a frequency adjustment of more than 1 ppb, which completely moots my specification goal.</p><p>One way to fix that is to change the buffer amplifier into a compression amp - that is, an amplifier with fractional gain. To keep the range centered at the midpoint, a virtual ground from a voltage divider would be required.</p><p>The downside is that you can&apos;t (easily) make a non-inverting amplifier with less than unity gain. But reversing the tuning slope is merely a software change, so that&apos;s not a big problem.</p><p>Dividing the range by 4 (100k/50k) yields a voltage range of .825-2.475, which gives us a theoretical tuning granularity of just under 187 ppt - a 50% improvement. We are throwing away the outer .525 volt of the potential tuning range (remember that 0-0.3 and 3.0-3.3 volts are outside the allowable range, so they&apos;re dead to us). If &#xB1;10 ppm is an honest spec (worst case for this calculation), then our tuning range is reduced to &#xB1;6.1 ppm - still well in excess of the 15 year lifespan frequency tolerance of &lt; &#xB1;4.6 ppm.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/6872/log/23708-back-to-ldo">Back to LDO</a></h2>
                            <small class="authorship">12 hours ago  &bull;
                                <a class="gray-link" href="/project/6872/log/23708#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-23708"><p>I&apos;m going to revert back to using an LDO. Frankly, I&apos;m not sure why I changed it to a switcher. It&apos;s never going to be as clean as an LDO, and the current requirements are tiny. With 6 volts in, a 3.3 volt LDO will run forever without breaking a sweat.</p><p>The next version is also going to get the reconfigured amplifier for the control voltage.</p><p>See you in a week. :/</p></div>
                            </div>
                        </li>
                    
                </ul>

                
                <div class="pagination">
                    
                    <a href="?page=2" class="grey-gold-button prev-button show">Previous</a>
                    
                    
                </div>
                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'QpWKebGq-mCGe8M_frKIGPg3fhDtT8tAsfBE';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>