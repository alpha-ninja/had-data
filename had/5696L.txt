<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; 256 Channel Firework Controller &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F5696%2Flogs">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/5696-256-channel-firework-controller">256 Channel Firework Controller</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">Use two cheap 16-relay boards to multiplex and remotely control up to 256 channels of firey madness</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/67006-aleks-clark" title="Visit Profile">Aleks Clark</a><span>&bull;</span>
                
                3 months ago<span>&bull;</span><a href="/project/5696#discussion-list" title="See Comments">2 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/5696-256-channel-firework-controller">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/5696/logs/sort/newest">Newest</option>
                    <option value="/project/5696/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/5696/log/17579-parts-ordered">Parts ordered!</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/17579#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17579"><p>uh, that's about it. eta 2-3 weeks.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/17855-bad-ideas-good-ideas">Bad Ideas, Good Ideas</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/17855#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17855"><p>So, was thinking about actually getting all of these 256 channels broken out to terminals, and the thinking went somewhat like "connect 16 wires to each relay, then distribute". That progressed until I ended up with something like:</p><p><img src="https://cdn.hackaday.io/images/5081021431546808568.png"></p><p>two relay boards, surrounded by 32 16-connection busbars, breaking out to 16 30-position screw terminals. At this point I'm thinking "screw it, we'll just have 32 channels, direct-wired to the relays, and call it a day". The cost of all the busbars and terminals at this point has exceeded the rest of the materials for the project, there's just no way 256 channels is happening. In fact, it gets worse, because you may have noticed that even 16 30-pos terminals doesn't bring us to the full 512 connections needed, despite the rat's nest that would ensue in trying to wire up something like the above.</p><p>Enter LED matrices! Or any other kind of matrix arrangement, like what I arrived at:</p><p><img src="https://cdn.hackaday.io/images/8656261431547535218.png"></p><p>The concept here is to take a 18"x18" sheet of perfboard, and put the negative wires on the back, and the positive ones on the front. Use bare copper wires on the board, and secure with something. Line up the negative wires with the holes, and solder PCB screw terminals between the positive and negative wires, with the terminal post going through the hole to the other side of the board to connect to the negative rail. I'll probably use some high-temperature polymorphic resin (aka hot glue) to give the terminals a bit of mechanical stability, but this should make for a compact arrangement that's straightforward to troubleshoot. Heck, I might even add LEDs to each terminal just to verify/monitor the operation of the board :)</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/18634-parts-arrived-soldering-time">Parts arrived, soldering time!</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/18634#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-18634"><p>Man it would be really nice to have something better than this lame-o hand helper for the soldering. I really don't like jumping wires all over the perfboard, so I soldered some stackable headers right under the I2C port expander:</p><p><img src="https://c4.staticflickr.com/8/7781/17589874313_8ee27db3f5_b.jpg"></p><p>The rest of the parts showed up as well:</p><p><img src="https://c1.staticflickr.com/9/8844/18211680611_e7f85e1902_b.jpg">The relay board actually expects the pins to be pulled to ground to activate the relays. That should make initialization...interesting. Obviously don't want those relays clicking on and off while we're booting up, and the fireworks are all loaded. Speaking of fireworks, here are the igniters:</p><p><img src="https://c1.staticflickr.com/9/8796/17589854833_67d149e27a_b.jpg"><span></span><br></p><p>100 count for ~$25. Will need another bag or so. Ignition time at 3.3V was satisfyingly fast, fractions of a second. Jamming some green fuse in there worked like a charm, so I'm not expecting any problems at 12V.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/19277-should-have-read-the-datasheet">Should have read the datasheet</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/19277#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-19277"><p>Well, word of warning: the MCP23017 is definitely not indestructible. Second, NEVER hook up something that SUPPLIES 5v to a sainsmart 16 relay module unless the sainsmart is being supplied with 12v. The 5v will flow at high currents, seemingly powering the onboard regulator and making things "kind of" work for a bit, then the regulator gets hot, etc. It was bad.</p><p>Read the datasheet, not just the pinout :D</p><p>Here's the final protoboard, which ended up toast:</p><p><img src="https://c1.staticflickr.com/1/478/18646345266_8729337752_b.jpg"></p><p><img src="https://c1.staticflickr.com/1/470/18484893628_ceed8171e5_b.jpg"></p><p>You can see where I severed the 5v connection in an attempt to salvage things. Fortunately I got 5 of the MCP23017, so we're not doomed yet!.</p><p>Subsequently, however, I put things on a breadboard:</p><p><img src="https://c1.staticflickr.com/1/261/18486478829_1a084b30f9_b.jpg"></p><p>And finally, I wrote up some go code to make clicky-blinky things happen!</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/19279-blinky-blinky">Blinky Blinky</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/19279#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-19279"><iframe src="https://www.flickr.com/photos/sweeperpix/18052389293/in/album-72157654346167541/player/" width="640" height="360" frameborder="0" allowfullscreen=""></iframe></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/20177-looks-like-well-make-it">looks like we&#39;ll make it...</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/20177#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-20177"><p>The 4th is nigh but assembly is going smoothly. Still need to do some testing, but most of the boards are mounted in place. The terminals on the left were salvaged ones I hoped to use, but after I got started soldering them, I realized it would be nearly impossible to wire them since the wire openings face downwards.</p><p><img src="https://c1.staticflickr.com/1/467/18640130784_ab5a98503d_b.jpg">Scraping enamel off of magnet wire has been the least favorite activity in this project.....</p><p><img src="https://c4.staticflickr.com/4/3901/19236501746_f8117086c4_b.jpg">Here we can see the "bus" for one of the igniter power sides: just some thick solid core wire bent into a U-shape and partially stripped.<br><br><img src="https://c1.staticflickr.com/1/402/18640119154_dde5d76a2d_b.jpg"><br><span class="redactor-invisible-space"></span></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/20194-power-safety">Power &amp; safety</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/20194#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-20194"><p>So we definitely want to make sure nothing fires while putting things together. To that end, the relay boards will be powered separately from the RPi, and the actual firing power will be on yet another circuit. My junk stash yielded up this box, which was previously used for an arduino-powered quiz button system:</p><p><img src="https://c1.staticflickr.com/1/396/19266434091_d8585a43a2_b.jpg"><br>The existing nintendo power button will switch 12v to the relay board, and a salvaged printer power switch (the green blob in top/left) will switch firing power. Firing power will likely be 12v but it could turn out to be 48v if voltage drop is too high. I'll be adding binding posts for each circuit and screwing the box to the main sheet of plywood.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/20294-testing">Testing!</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/20294#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-20294"><p>Well, small update cause the 4th is nearly upon us. Took the board outside, and it decided not to work. Yay. The problem seems to be on the i2c bus and/or the power/ground lines. I will either need to slow it down ( <a href="http://arduino-pi.blogspot.com/2014/03/speeding-up-i2c-bus-on-raspberry-pi-and.html">http://arduino-pi.blogspot.com/2014/03/speeding-up-i2c-bus-on-raspberry-pi-and.html</a> ) or add additional pullups on the power lines. Unsure why it started failing all of the sudden, unless the humid air outside added capacitance somehow.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/20351-victory">Victory!</a></h2>
                            <small class="authorship">2 months ago  &bull;
                                <a class="gray-link" href="/project/5696/log/20351#discussion-list">
                                    1 comment
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-20351"><p style="margin-left: 20px;">Ok so hanging out in the <a href="https://hackaday.io/project/5373-hackaday-prize-hacker-channel">collaboratorium</a> turned out to be profitable - <a data-mention-user-id="16981" href="/hacker/16981">@Blecky</a> prodded me until I figured out my problem with i2c. One of the MCP23017's had its SDA/SCL lines swapped, so every time I 'fixed' one, the other failed. Also, the RPi has pullups, so the pullups I added were not helping things.</p><p style="margin-left: 20px;">After my i2c woes were sorted, I was able to successfully fire some igniters, whoo! 300ms is a bit short, I had to run the sequence a couple times to get them all to fire, so I'll use 600ms, and just write some code for firing groups simultaneously. Now it's time to make a bunch more cables.</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5696/log/20432-igniter-cables">Igniter Cables</a></h2>
                            <small class="authorship">a month ago  &bull;
                                <a class="gray-link" href="/project/5696/log/20432#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-20432"><p>Well, this morning finished assembling igniter cables. Definitely going the RJ45 + push lock terminal route next time, something like:</p><p><img src="http://connectorsupplier.com/images/uploads/120313-CS-PCB-quick-connect-2.jpg"><br>The current process goes like this:<br></p><p><img src="https://c1.staticflickr.com/1/285/19222929419_c565578d3f_b.jpg"><br><span class="redactor-invisible-space">Solder<br></span></p><p><span class="redactor-invisible-space"><br></span></p><p><span class="redactor-invisible-space"><img src="https://c1.staticflickr.com/1/335/19221533658_eae6abe977_b.jpg"><br><span class="redactor-invisible-space">separate wires on a piece of cardstock<br><br><img src="https://c1.staticflickr.com/1/549/19402884402_5a0908ca7d_b.jpg">add hot glue<br><br><img src="https://c1.staticflickr.com/1/330/19221523588_b6ed3cb307_b.jpg"><br><span class="redactor-invisible-space">press down</span><br></span></span></p><p><span class="redactor-invisible-space"><span class="redactor-invisible-space"><span class="redactor-invisible-space"><img src="https://c1.staticflickr.com/1/448/19221511878_4a94f01e76_b.jpg"><br><span class="redactor-invisible-space"><br></span></span></span></span></p><p><span class="redactor-invisible-space"><span class="redactor-invisible-space"><span class="redactor-invisible-space">rinse, repeat many times</span></span></span></p><p><span class="redactor-invisible-space"><span class="redactor-invisible-space"><span class="redactor-invisible-space"><br></span></span></span></p></div>
                            </div>
                        </li>
                    
                </ul>

                
                <div class="pagination">
                    
                    
                    <a href="?page=2" class="grey-gold-button next-button show">Next</a>
                    
                </div>
                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'QL4XzIxU-gEPe6SrlDTW64-Jlzb8lDkWUunI';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>