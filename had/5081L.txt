<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en" ng-app="buildlogApp"> <!--<![endif]-->
<head>
    
    <title>Project logs &bull; Malti &bull; Hackaday.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="//cdn.hackaday.io/css/style.css?version=0.48.6" />
    <script type="text/javascript" src="//use.typekit.net/ymb0lgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body class="logs">

    <!--
############################################################################################
############################################################################################
############################################################################################
#####################Kt;tL#######################################Kti,E######################
#######################;   .###################################G    E#######################
#######################K    f##################################    ;########################
########################Wj   E###############################K:  .W#########################
##########################.  :E##############################:  .L##########################
#########################D    f##############################.   .##########################
########################,     ;##############################     :E#######K################
################f######K      ,##############################      ,######Lt################
################  W###W       i##############################       t####j t################
################:  E#L.        f###########################L.        f#Ki .E################
################j  ;E.          j##########################.         .G;  i#################
#################L               i#######################K                ##################
#################W                E#####################K;               ;##################
###################:               .###################D               :f###################
#####################DLfGD           G####WEEEEKW####W           ;GffGK#####################
##########################i         iD##Kfi    :jKW##D          iE##########################
###########################W      ,G##f            jE#E;       j############################
############################L     D##D              ,##K       W############################
#############################D:  G#W                  K#E,   G##############################
###############################;i#L                    j## ,E###############################
###############################KK#.                     ##iE################################
#################################j                      ;K##################################
################################W                        ,##################################
################################E                         ##################################
###############################Ki                         D#################################
###############################E.                         L#################################
###############################f    iD##W;       D###D    :#################################
###############################i   i######K     K#####K;   #################################
###############################;  .E#######     #######D   #################################
###############################;  L########     ########   #################################
###############################i  G#######K     K#######   #################################
###############################j  L#####E,       fE#####   #################################
###############################D  .E##j            .t##E  ;#################################
###############################E:  ;##.              #Wt  j#################################
################################G   ;t      tWi      t    E#################################
#############################KL##           K#K;          #K:K##############################
#############################i ##:          ###t         j#f ;K#############################
############################:  G#K          #E#L        L##    D############################
###########################D   ;W#:         #;#L        W#K    .############################
#####################KKEKK      :##L        ; ..      :D##.      fKEEK######################
###################t.            ;##G:               ,##E,             tD###################
##################G               E##E               i##;               :###################
#################D                W##W    iL    E.    ###D                ##################
################W,               G###W    tG    K.    ####:               K#################
################;  LW;         ,E#####:  ;W#    #G   f#####;         ;KG  :K################
################  D###E       ;########WW####WW####WW#######W       :####: j################
################ ,#####:      ;##############################       G####E i################
################K#######.     ;##############################      L######WG################
########################f     i##############################     j#########################
#########################W   .D##############################.   i##########################
#########################E   G###############################D   ,##########################
########################G:   #################################j   G#########################
#######################f    K##################################j    W#######################
#####################Kt :iE#####################################KL:  K######################
############################################################################################
############################################################################################
############################################################################################
-->

<div class="header" id="header">
    <div class="container">
        <h1 class="logo">
            <a href="/" title="Hackaday.io Home" class="home" onclick="CT(this, 'Menu', 'Home'); return false;"></a>
            <a href="/" title="Hackaday.io Home" class="brand" onclick="CT(this, 'Menu', 'Home'); return false;">Hack a Day</a>
        </h1>

        <a href="javascript:void(0);" class="responsive-menu">Menu</a>

        <ul class="nav" role="navigation">
            <li><a href="/projects" class="">Projects</a></li>
            <li><a href="/lists" class="">Lists</a></li>
            <li><a href="/stack" class="">Stack</a></li>
            <li class="dropdown more-nav j-more-open">
                <a href="javascript:void(0)" class="dropdown-link icon-dropdown">More</a>
                <ul role="menu" class="dropdown-menu more-menu" id="j-more">
                    <li><a href="http://hackaday.com/blog/" target="_blank">Blog</a></li>
                    <li><a href="/events">Events</a></li>
                    <li><a href="/hackerspaces">Hackerspaces</a></li>
                    <li><a href="/hackers">Profiles</a></li>
                    <li><a href="/contests">Contests</a></li>
                    <li><a href="/prize" target="_blank">The Hackaday Prize</a></li>
                    <li><a href="/submissions/prize2015/list">2015 Prize Entries</a></li>
                </ul>
            </li>
            <li class="menu-last-child">
                <div class="search-holder show">
                    <form id="search-form" action="/search" onsubmit="return submitSearch();" method="GET">
                        <input type="text" placeholder="Search" name="term" class="input-search j-add-search" id="j-add-search" value="" autocomplete="off" pattern=".{3,}" required title="3 characters minimum" />
                        <input type="submit" class="search-button" />
                    </form>
                </div>
            </li>
        </ul>

        

            <ul class="nav pull-right" role="navigation">
                <li><a href="/signup" class="grey-white-button become-member">Sign up</a></li>
                <li><a href="/signin?returnUrl=%2Fproject%2F5081%2Flogs">Sign in</a></li>
            </ul>

        
    </div>
</div>

<div id="topMessage" class="alert"><span class="j-top-content"></span><a href="javascript:void(0);" class="alert-close j-top-message-close">Close</a></div>




    <div class="headline">
        <div class="container">
            <h2><a href="/project/5081-malti">Malti</a></h2>
            <p class="description-title"> Project logs</p>
            <p class="description-summary">Malti is a low cost open source handheld Linux platform that makes experimenting with and learning about electronics easier</p>
            <div class="description-metainfo">
                
                    <span>created by <a href="/hacker/60254-jeremy-van" title="Visit Profile">Jeremy Van</a><span>&bull;</span>
                
                5 months ago<span>&bull;</span><a href="/project/5081#discussion-list" title="See Comments">4 Comments</a></span>
            </div>
        </div>
    </div>

    <div class="container post-content">
        <div class="section-buildsort">
            <span class="pull-left">
                <a href="/project/5081-malti">&#171; Back to project details</a>
            </span>
            <span class="sort-holder pull-right">
                <label for="sort-by">Sort by:</label>
                <select class="sort" id="sort-by">
                    <option value="/project/5081/logs/sort/newest">Newest</option>
                    <option value="/project/5081/logs/sort/oldest" selected="selected">Oldest</option>
                </select>
            </span>
        </div>
        <div class="section section-buildlogs last">
            

                <ul class="buillogs-list">
                    
                        <li>
                            <h2><a href="/project/5081/log/16362-first-prototype-board-assembled">First Prototype Board Assembled</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/5081/log/16362#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-16362"><p>Our board finally came from OSHPark! After a night of SMD soldering it's finally done.<br></p><p><img src="https://cdn.hackaday.io/images/5780431428668580874.jpg"></p><p>Note: The original name for this project has changed thanks mostly to Rita. <br></p><p><img src="https://cdn.hackaday.io/images/5743441428668491443.jpg"></p><p>What's Next:</p><p>We're using this prototype board to start work on driver support for the TCA814. This neat little chip controls all 59 keys in matrix configuration and takes care of the debouncing for us. Also, we have the battery charging circuit and voltage regulator on the same PCB so we can get a realistic estimate of battery life.<br></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/17068-it-lives">It Lives!</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/5081/log/17068#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17068"><p>The first prototype is assembled and working. The power circuitry is being a little finicky but the keyboard works great. Here's the schematic for it:</p><p><img src="https://cdn.hackaday.io/images/1248151430221386797.png"></p><p>To get the keyboard working with the Raspberry Pi A+ (what we're using for our current prototype):</p><p>3.3v --&gt;  Pin 1</p><p>SDA --&gt; Pin 3</p><p>SCL --&gt; Pin 5</p><p>GND --&gt; Any GND Pin</p><p>INT   --&gt; ***Is Not Connected</p><p>On the software side of things we compiled a custom Kernel with the TCA8418 Driver. By far the easiest method I found for cross compiling the Kernel is found <a href="https://learn.adafruit.com/raspberry-pi-kernel-o-matic/overview">Here</a>. The total compilation time was only about 20mins. The tricky part was getting the device tree overlay working. Take a look at the Raspberry Pi <a href="https://www.raspberrypi.org/documentation/configuration/device-tree.md#part3">device tree documentation</a>. </p><p>Here's the overlay:<br></p><pre class="hljs xml">/dts-v1/;
/plugin/;


/{

compatible = "brcm,bcm2708";

fragment@0 {
	target = <span class="hljs-tag">&lt;<span class="hljs-title">&amp;i2c1</span>&gt;</span>;
	__overlay__{
		tca8418@34 {
	        compatible = "ti,tca8418";    
			
	        reg = <span class="hljs-tag">&lt;<span class="hljs-title">0x34</span>&gt;</span>;
	        
	      			
	    irq-gpio = <span class="hljs-tag">&lt;<span class="hljs-title">&amp;gpio</span> <span class="hljs-attribute">11</span> <span class="hljs-attribute">0x2</span>&gt;</span>; /* IRQF_TRIGGER_FALLING */
            interrupts = <span class="hljs-tag">&lt;<span class="hljs-title">11</span> <span class="hljs-attribute">2</span>&gt;</span>; /* high-to-low edge triggered */
            interrupt-parent = <span class="hljs-tag">&lt;<span class="hljs-title">&amp;gpio</span>&gt;</span>;
            interrupt-controller;
	        
			keypad,num-rows = <span class="hljs-tag">&lt;<span class="hljs-title">8</span>&gt;</span>;
	        keypad,num-columns = <span class="hljs-tag">&lt;<span class="hljs-title">10</span>&gt;</span>;
	        linux,keymap = <span class="hljs-tag">&lt;
	    /* <span class="hljs-attribute">row</span> | <span class="hljs-attribute">column</span> | <span class="hljs-attribute">key-code</span>  <span class="hljs-attribute">ex:</span> <span class="hljs-attribute">04</span>,<span class="hljs-attribute">08</span>,<span class="hljs-attribute">0010</span> <span class="hljs-attribute">q</span> <span class="hljs-attribute">key</span>*/
	
	            <span class="hljs-attribute">0x04080010</span>
				<span class="hljs-attribute">0x04070011</span>
				<span class="hljs-attribute">0x04060012</span>
				<span class="hljs-attribute">0x04050013</span>
				<span class="hljs-attribute">0x03040014</span>
				<span class="hljs-attribute">0x03030015</span>
				<span class="hljs-attribute">0x03020016</span>
				<span class="hljs-attribute">0x03010017</span>
				<span class="hljs-attribute">0x03000018</span>
				<span class="hljs-attribute">0x02000019</span>
				<span class="hljs-attribute">0x0507001e</span>
				<span class="hljs-attribute">0x0506001f</span>
				<span class="hljs-attribute">0x05050020</span>
				<span class="hljs-attribute">0x05040021</span>
				<span class="hljs-attribute">0x04040022</span>
				<span class="hljs-attribute">0x05030023</span>
				<span class="hljs-attribute">0x04030024</span>
				<span class="hljs-attribute">0x05020025</span>
				<span class="hljs-attribute">0x04020026</span>
				<span class="hljs-attribute">0x0603002c</span>
				<span class="hljs-attribute">0x0602002d</span>
				<span class="hljs-attribute">0x0601002e</span>
				<span class="hljs-attribute">0x0501002f</span>
				<span class="hljs-attribute">0x04010030</span>
				<span class="hljs-attribute">0x04000031</span>
				<span class="hljs-attribute">0x05000032</span>
				<span class="hljs-attribute">0x0201000e</span>
				<span class="hljs-attribute">0x0600001c</span>
				<span class="hljs-attribute">0x0508000f</span>
				<span class="hljs-attribute">0x0308002a</span>
				<span class="hljs-attribute">0x00070008</span>
				<span class="hljs-attribute">0x00060009</span>
				<span class="hljs-attribute">0x0005000a</span>
				<span class="hljs-attribute">0x0004004e</span>
				<span class="hljs-attribute">0x00030069</span>
				<span class="hljs-attribute">0x00020067</span>
				<span class="hljs-attribute">0x0001006a</span>
				<span class="hljs-attribute">0x0000006c</span>
				<span class="hljs-attribute">0x01070005</span>
				<span class="hljs-attribute">0x01050007</span>
				<span class="hljs-attribute">0x01060006</span>
				<span class="hljs-attribute">0x0104000c</span>
				<span class="hljs-attribute">0x02070002</span>
				<span class="hljs-attribute">0x02060003</span>
				<span class="hljs-attribute">0x02050004</span>
				<span class="hljs-attribute">0x01030037</span>
				<span class="hljs-attribute">0x0306000b</span>
				<span class="hljs-attribute">0x03050034</span>
				<span class="hljs-attribute">0x02040035</span>
				<span class="hljs-attribute">0x06040039</span>
	        &gt;</span>;
			};
		}; 
	}; 

};</pre><p>You can find the keycodes in /linux/include/input.h just convert them to hex.</p><p>Here's a couple of sites with additional information:</p><p><a href="http://xillybus.com/tutorials/device-tree-zynq-1" target="_blank">http://xillybus.com/tutorials/device-tree-zynq-1</a>  Not Raspberry Pi Specific but Has Great Info On The Device Tree</p><p><a href="https://aababilov.wordpress.com/2012/10/09/setting-up-the-keyboard-in-linux/" target="_blank">https://aababilov.wordpress.com/2012/10/09/setting-up-the-keyboard-in-linux/</a> Good Info on How Keyboards Work in Linux</p><p>Now that we have the keyboard working the next step is get the PCB re-printed with modified power circuitry once we figure out exactly what went wrong.<br></p><p>That's all for now. We're posting a video of Malti running soon so stay tuned. Also, if you want to get your hands on our prototype check us out at the <a href="http://makerfairechicagonorthside.com/">2015 Chicago Northside Maker Faire</a>.</p><p><img src="https://makerfairechicagonorthside.files.wordpress.com/2012/01/chicagonorthside_mmf_logos_googleplus.png?w=150&amp;h=150"></p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/17405-chicago-northside-mini-maker-faire-recap">Chicago Northside Mini Maker Faire Recap</a></h2>
                            <small class="authorship">4 months ago  &bull;
                                <a class="gray-link" href="/project/5081/log/17405#discussion-list">
                                    1 comment
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17405"><p>From the Desk of Rita:</p><p>Jeremy and I would like to extend a big THANK YOU to everyone who came to our table at the Chicago Northside Mini Maker Faire this Saturday! We had a great time, and we're thrilled by the positive response Malti received. </p><p>While we were there, we asked what all of you wonderful makers would do with Malti if you had one. Quite a few teachers said they would love having a tool like Malti to use in their classrooms. Another suggested starting a coding club for avid young programmers. One maker thought using Malti to make a tricorder from Star Trek would be pretty neat. We got an overall fantastic response from our young audience. Several aspiring makers said they wanted to make a "homework machine" out of Malti, and one particularly ambitious young maker said she wants to make an alarm to keep her sister away from her stuff (but a quiet alarm, so her sister doesn't know about it). </p><p>Besides the contest, we had a blinky demo set up to show just one of the many virtues of using iPython—teaching kids. I was absolutely shocked and awed at the positive response from the elementary school aged makers that came by. With just a touch of guidance, they were able to answer age-appropriate comprehension questions posed to them. They were very excited to have understood so quickly—almost as excited as I was to see them understanding! They seemed to legitimately enjoy the demonstration, and some asked if we could teach them more!</p><p>So what's next? All of your support has certainly motivated us to work even harder on getting Malti nailed down. We're putting our noses to the proverbial grindstone, so we can get Malti in your hands as soon as possible! Jeremy's working on revising the PCB to accommodate SMD buttons for the keyboard, along with working on that finicky power circuitry. I'm going to delve into the wild world of software development, starting with an efficient application launcher for a small touchscreen. </p><p>A very special thanks goes to the fantastic team at the Chicago Northside Mini Maker Faire for all their help, and for letting us come show off! Thank you to all the Makers who showed up and offered such positive words of encouragement. We hope you will continue to follow Malti as we develop it!</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/17857-pictures">Pictures!</a></h2>
                            <small class="authorship">3 months ago  &bull;
                                <a class="gray-link" href="/project/5081/log/17857#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-17857"><p>We're still working on a demo video but here's some pictures of our prototype. What's next:</p><p>On the hardware side I'm modifying the battery charging circuitry to have proper load balancing. I'm also implementing a soft shutdown for when the charge is low.</p><p>Rita is hard at work writing an application launcher in Python.</p><p><img src="http://i.imgur.com/i1nnRqd.jpg"></p><img src="http://i.imgur.com/AbZKJA6.jpg"><img src="http://i.imgur.com/nnLBBl9.jpg"></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/22821-what-a-night">What a Night!</a></h2>
                            <small class="authorship">3 days ago  &bull;
                                <a class="gray-link" href="/project/5081/log/22821#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-22821">Jeremy and I just pulled an all-nighter getting last-minute details ready for Malti to ship for Best Product. I was babysitting a bunch of 3D printed cases (and of course a couple of 3D printed catastrophies), and Jeremy was tweaking the software. He&#x2019;s been hard at work on getting Malti ready in time for Best Product, but we found last night that we need a lot more activity on our page! We were so concerned with actually making the best product that our attention was diverted from updating the page.   <p>Get ready to be bombarded, hackers! We will be making posts like crazy for the next few days. You&#x2019;ll see at least a couple videos and quite a few posts. Maybe we&#x2019;ll even post a picture or two of our crazy, last-minute selves! Thank you all so much for your patience with us updating the page. We know this is an exciting project, and we really appreciate all the support we&#x2019;ve gotten over these past months. </p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/23000-prototypes-shipped">Prototypes Shipped</a></h2>
                            <small class="authorship">2 days ago  &bull;
                                <a class="gray-link" href="/project/5081/log/23000#discussion-list">
                                    4 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-23000"><p>Well guys we did it. Our prototypes are on their way to Pasadena. Here&apos;s a breakdown of what we&apos;ve done so far. Despite delays with our revised board design our software has been moving along quiet well. Malti&apos;s interface is built on top of iPython Notebook. To get it working with the Raspberry Pi we&apos;ve implemented a miniature web browser using Qt Webkit that runs at start-up. Because Qt Needs OpenGL to run Webkit and we&apos;re running  our display over the SPI interface we had to trick the Pi into running OpenGL buy using <a href="https://github.com/tasanakorn/rpi-fbcp">frame buffer copy</a>.  Right now I&apos;m diligently working to get all of the code cleaned up and on Github.</p><p>Until then we&apos;ve added a video of our prototype. We&apos;ve had this for a while but haven&apos;t had a chance to edit it.</p><iframe style="width: 500px; height: 281px;" src="//www.youtube.com/embed/d1E38BArhCQ" allowfullscreen="" frameborder="0" height="281" width="500"></iframe><p>~~Jeremy</p></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/23135-malti-interface-demo">Malti Interface Demo</a></h2>
                            <small class="authorship">a day ago  &bull;
                                <a class="gray-link" href="/project/5081/log/23135#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-23135"><iframe style="width: 500px; height: 281px;" src="//www.youtube.com/embed/GWI05uSsBvQ" allowfullscreen="" frameborder="0" height="281" width="500"></iframe></div>
                            </div>
                        </li>
                    
                        <li>
                            <h2><a href="/project/5081/log/23226-the-github-repo-is-up">The Github Repo is Up</a></h2>
                            <small class="authorship">a day ago  &bull;
                                <a class="gray-link" href="/project/5081/log/23226#discussion-list">
                                    0 comments
                                </a>
                                </small>
                            <div style="position:relative">
                                <div id="post-body-23226"><p>I&apos;m finally finished cleaning up the code code that runs iPython Notebook. It&apos;s called Malti-View. It&apos;s a super simple minimalist qt browser that runs outside of  X. I&apos;m also, excited to announce that hardware repo. All of the design work is done in Kicad I&apos;m going to try something a little bit different. Hopefully I can open up the hardware development process a little. I&apos;ll post the details as I go.</p><p><a href="https://github.com/AFJay/Malti">https://github.com/AFJay/Malti</a></p></div>
                            </div>
                        </li>
                    
                </ul>

                

                

                </p>

            
        </div>
    </div>

    










<div class="footer" id="footer">
  <a href="#header" class="back-to-top" onClick="CT(this, 'Footer', 'GoingUp');">^ Going up? ^</a>
    <div class="container">
        <p><a href="http://hackaday.com/about/">About Us</a> <a href="mailto:projects-contact@hackaday.com">Contact Us</a> <a href="/project/37">Give Feedback</a>&copy; 2015 Hackaday <a href="/tos">Terms of Use</a> <a href="/privacy-policy">Privacy Policy</a></p>
        <a href="/" class="had-skull"  onClick="CT(this, 'Footer', 'Home' ); return false;">Hackaday.io</a>
    </div>
</div>

<script>

    var csrftoken = 'acEhtULZ-AoKdHsPnYmhw69KTE1EZ6Gkln8Q';

</script>

    <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47229708-1', 'auto');

    var dimensionValue = 'nonregistered';
    ga('set', 'dimension1', dimensionValue);
    ga('require', 'displayfeatures');

    ga('send', 'pageview');

    </script>

<img src="//analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=HIO_logs&amp;extra=logged%3Dfalse%7ChaveAccountCookie%3D0%7C&amp;ab=undefined" class="sf-impression" />

    
    
    <script src="//cdn.hackaday.io/build/h%2FydgsYIeDTf7pqgYQEKK8Ngblw0IkZCDqfJ9S2tk7zsBoxIHt5iOd49Qp%2BF4vdxEuRj%2BGpGDLbX4aGOQGmbjaOxUZvklg4ReFk68R95OQshFrGKebvogKGQOiB5Hi1xym9KC54c9Ps0WpzuNydLk4B%2FbKi91KhV40Uxhl38XXb1IVAxAI8iW%2BoQUPCFkHVWZxD0B%2BMZ%2BuEXJTlWuBmopNMxTHRK5yleITPZODT6evbVRQc6AXs9w2Pfk7FS2nKy-0.48.6.js"></script>

</body>
</html>